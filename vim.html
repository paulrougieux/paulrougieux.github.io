<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Vim Commands</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Paul Rougieux</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-wrench"></span>
     
    Tools
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="bash.html">Bash</a>
    </li>
    <li>
      <a href="communication.html">Communication</a>
    </li>
    <li>
      <a href="debian.html">Debian</a>
    </li>
    <li>
      <a href="docker.html">Docker</a>
    </li>
    <li>
      <a href="git.html">Git</a>
    </li>
    <li>
      <a href="latex_and_lyx.html">Latex and Lyx</a>
    </li>
    <li>
      <a href="markdown.html">Markdown</a>
    </li>
    <li>
      <a href="mysql.html">MySQL</a>
    </li>
    <li>
      <a href="postgresql.html">PostgreSQL</a>
    </li>
    <li>
      <a href="publish.html">Publish</a>
    </li>
    <li>
      <a href="python.html">Python</a>
    </li>
    <li>
      <a href="R.html">R</a>
    </li>
    <li>
      <a href="vim.html">Vim</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-microchip"></span>
     
    Algos
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="carbon_budget_model.html">Carbon Budget Model</a>
    </li>
    <li>
      <a href="cobwood.html">Cobwood forest sector model</a>
    </li>
    <li>
      <a href="musical_scales.html">Musical scales</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-line-chart"></span>
     
    Data
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="explore.html">Explore</a>
    </li>
    <li>
      <a href="datasources.html">Sources</a>
    </li>
  </ul>
</li>
<li>
  <a href="events.html">
    <span class="fa fa-users"></span>
     
    Events
  </a>
</li>
<li>
  <a href="publications.html">
    <span class="fa fa-book"></span>
     
    Publications
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-brain"></span>
     
    Brain
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="biography.html">Biography</a>
    </li>
    <li>
      <a href="communication.html">Communication</a>
    </li>
    <li>
      <a href="procrastination.html">Procrastination</a>
    </li>
    <li>
      <a href="space.html">Maximalist Degrowth - Space Earth</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Vim Commands</h1>

</div>


<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>Vim is a modal text editor, to learn how to switch modes, start by
the section <a href="#navigation_edit">Switch between navigation and
editing mode</a>. Large part of this documents have been copied from the
vim help accessible through:</p>
<pre><code>:help &lt;topic&gt;</code></pre>
<p>People that I admire use vim.</p>
</div>
<div id="configure-vim-in-.vimrc" class="section level1">
<h1>Configure vim in .vimrc</h1>
<p>See also my vimrc file stored in <a
href="setup/.vimrc">setup/.vimrc</a>. Many configuration options are
mentioned throughout this document.</p>
<p>Reload the configuration after editing it:</p>
<pre><code>:so ~/.vimrc</code></pre>
<p>Text colour. Add syntax highlight to your .vimrc</p>
<pre><code>syntax enable</code></pre>
<div id="file-specific-.vimrc-options" class="section level2">
<h2>File specific .vimrc options</h2>
<p>How to add a file extension to vim syntax highlight</p>
<pre><code>au BufNewFile,BufRead *.dump set filetype=sql</code></pre>
<p>I used it to display markdown files as text files:</p>
<pre><code>au BufNewFile,BufRead *.md set filetype=txt</code></pre>
<p>Make a key combination specific to latex files, to insert a citation
key using the vimtex plugin. Note: ctrl-space appears as ctrl-@ in my
terminal</p>
<pre><code>au BufRead,BufNewFile *.tex inoremap &lt;C-Space&gt; &lt;C-x&gt;&lt;C-o&gt; | inoremap &lt;C-@&gt; &lt;C-x&gt;&lt;C-o&gt;</code></pre>
<p>Prevent tab expanding to space in make files <a
href="https://stackoverflow.com/a/158990/2641825">SO answer</a>:</p>
<pre><code>autocmd FileType make set noexpandtab</code></pre>
</div>
<div id="keyboard-azerty-quertz" class="section level2">
<h2>Keyboard AZERTY, QUERTZ</h2>
<ul>
<li>SO <a
href="https://stackoverflow.com/questions/33245317/vim-and-azerty-keyboards">Configure
vim for AZERTY keyboards</a></li>
<li>Reddit <a
href="https://www.reddit.com/r/vim/comments/2tvupe/azerty_keymapping/">AZERTY
keymapping</a></li>
<li>Reddit <a
href="https://www.reddit.com/r/vim/comments/9bh6ql/vim_on_czqwertz/">Vim
on CZ QUERTZ</a></li>
</ul>
<p>I mapped m to the end of line, maybe I should use m instead?</p>
<pre><code>noremap m $</code></pre>
<p>See also mapping below.</p>
</div>
<div id="colour-themes" class="section level2">
<h2>Colour themes</h2>
<p>Be sure to set terminal colour to 256 as explained in an answer to <a
href="https://vi.stackexchange.com/a/25310/6671">a question on
vi.stackexchange</a> and in the vim wiki <a
href="https://vim.fandom.com/wiki/256_colors_in_vim">256 colors in
vim</a></p>
<pre><code>set t_Co=256</code></pre>
<ul>
<li>Slant <a
href="https://www.slant.co/topics/480/~best-vim-color-schemes#1">vim
Theme gallery</a></li>
<li><a href="https://github.com/rafalbromirski/vim-aurora">Custom theme
aurora</a></li>
</ul>
<p>For a while I used:</p>
<pre><code>set background=dark
colorscheme jellybeans</code></pre>
</div>
<div id="create-your-own-commands" class="section level2">
<h2>Create your own commands</h2>
<p>A command that reuses another command can be entered directly after
the command name, separated by a space. To enter normal and insert mode
command, you need to prefix it with “<code>normal</code>”. See
<code>:help normal</code> for more information on executing normal mode
commands typed on the command line.</p>
<p>Sample commands that I have in my <a
href="setup/.vimrc">.vimrc</a>.</p>
<p>Add the current date</p>
<pre><code>command! Date put =strftime(&#39;%Y-%m-%d&#39;)</code></pre>
<p>Convert the current line to snake case (1) replace any non
alphanumeric characters by underscores (2) convert to lower case.</p>
<pre><code>command! -range=% Snake s/[^a-zA-Z0-9]\+/_/g | normal Vu</code></pre>
<p>Lexplore with a 30 character size buffer only</p>
<pre><code>command! Ll Lexplore | vert res 30</code></pre>
<p>Display a word diff</p>
<pre><code>command! Gwdiff vert term git diff --word-diff</code></pre>
<p>Create a table of content command based on different tools that
depend on the file type</p>
<pre><code>augroup Toc
    autocmd!
    autocmd Filetype markdown command! -buffer Toc Voom
    autocmd Filetype rmd command! -buffer Toc Voom
    &quot; rnoweb are the Rnw notebooks mixing latex and R code
    autocmd Filetype rnoweb command! -buffer Toc Voom
    autocmd Filetype tex command! -buffer Toc VimtexTocOpen
augroup END
command! TOc Toc</code></pre>
<p>Title inside a script</p>
<pre><code>autocmd FileType python command! Title normal A #&lt;esc&gt;yyppv$r#kkv$r#</code></pre>
<p>Right align columns in tab separated files generated by Nvim-R. After
pressing the <local leader> r v comment to view a data frame.</p>
<pre><code>command! Tt Tabularize /\t/r0</code></pre>
</div>
<div id="key-mapping-and-shortcuts" class="section level2">
<h2>Key mapping and shortcuts</h2>
<p>See</p>
<pre><code>:help map</code></pre>
<p>Show all mappings including <leader> commands:</p>
<p>:map</p>
<p><a
href="https://vi.stackexchange.com/questions/2350/how-to-map-alt-key">How
to map the ALT key</a> Explains who to see what key combination is
actually seen by the console:</p>
<pre><code>sed -n l</code></pre>
<p>I used this mapping “ALT-;” to insert the pipe “%&gt;%” in R
documents:</p>
<pre><code>&quot; The ALT key is mapped to escape in the terminal, remap it
&quot; https://vi.stackexchange.com/questions/2350/how-to-map-alt-key
execute &quot;set &lt;M-;&gt;=\e;&quot;
autocmd FileType r inoremap &lt;M-;&gt; &lt;space&gt;%&gt;%&lt;CR&gt;
autocmd FileType rmd inoremap &lt;M-;&gt; &lt;space&gt;%&gt;%&lt;CR&gt;</code></pre>
<p>This didn’t work because the CTRL-; is seen as ; by the terminal:</p>
<pre><code>&quot; Try to map the CTRL+;
autocmd FileType r inoremap &lt;C-;&gt; &lt;space&gt;%&gt;%&lt;CR&gt;
autocmd FileType rmd inoremap &lt;C-;&gt; &lt;space&gt;%&gt;%&lt;CR&gt;</code></pre>
<p>In the end I changed the mapping &gt; to %&gt;% <a
href="https://github.com/jalvesaq/Nvim-R/issues/85">as explained in
NVimR issue 85</a>:</p>
<pre><code>autocmd FileType r inoremap &lt;buffer&gt; &gt; &lt;Esc&gt;:normal! a %&gt;%&lt;CR&gt;a 
autocmd FileType rmd inoremap &lt;buffer&gt; &gt; &lt;Esc&gt;:normal! a %&gt;%&lt;CR&gt;a </code></pre>
<p><a
href="https://stackoverflow.com/questions/1506764/how-to-map-ctrla-and-ctrlshifta-differently">different
mappings for CTRL+A and CTRL+SHIFT+A</a> It’s generally not
possible.</p>
</div>
<div id="minimal-.vimrc-for-bug-reports" class="section level2">
<h2>Minimal .vimrc for bug reports</h2>
<p>You can create a minimal .vimrc and use is by calling vim with</p>
<pre><code>vim -u /tmp/.vimrc</code></pre>
<p>See for example this <a
href="https://github.com/lervag/vimtex/issues/1719">bug report</a> where
I used this minimal vimrc file to investigate an issue with the Vimtex
plugin.</p>
<pre><code>set nocompatible
let &amp;runtimepath  = &#39;~/.vim/bundle/vimtex,&#39; . &amp;runtimepath
let &amp;runtimepath .= &#39;,~/.vim/bundle/vimtex/after&#39;
filetype plugin indent on
syntax enable
&quot; Use zathura as a PDF viewer
let g:vimtex_view_method = &#39;zathura&#39;</code></pre>
<p>Or another minimal vimrc to investigate an issue with the nvim-R
plugin.</p>
<pre><code>set nocompatible
let &amp;runtimepath  = &#39;~/.vim/bundle/Nvim-R,&#39; . &amp;runtimepath
filetype plugin indent on
syntax enable
let maplocalleader = &quot;;&quot;

&quot; enable vim-markdown for .Rmd files too
&quot; This might conflict with the Nvim-R plugin
augroup filetypedetect_markdown
    au!
    au BufRead,BufNewFile *.Rmd set ft=markdown
augroup END</code></pre>
<p>The solution was to use 2 file types for Rmd files:
<code>set ft=rmd.markdown</code>.</p>
</div>
<div id="show-settings-such-as-file-type" class="section level2">
<h2>Show settings such as file type</h2>
<p>Show existing values of settings with a question mark at the end</p>
<pre><code>:set updatetime?
:set signcolumn?
:set filetype?</code></pre>
</div>
</div>
<div id="convert" class="section level1">
<h1>Convert</h1>
<div id="pandoc" class="section level2">
<h2>Pandoc</h2>
<p>Vim uses a syntax highlight system that changes quotes and
backsticks. It prevents copy pasting from vim using the tmux copy
mechanism. To turn it off before a copy:</p>
<pre><code>syn off</code></pre>
<div id="from-markdown-to-other-formats-with-pandoc"
class="section level3">
<h3>From markdown to other formats with pandoc</h3>
<p>Convert markdown documents to other formats such as pdf with
pandoc.</p>
<p>Convert the current document to html</p>
<pre><code>:Pandoc </code></pre>
<p>Convert the current document to pdf</p>
<pre><code>:Pandoc pdf</code></pre>
<p>Convert the current document to word</p>
<pre><code>:Pandoc docx</code></pre>
<p>Other output -t options from man pandoc</p>
<p>• docx (Word docx) • html or html5 (HTML, i.e. HTML5/XHTML polyglot
markup) • latex (LaTeX) • odt (OpenOffice text document) • pptx
(PowerPoint slide show)</p>
<p>Add a yaml front matter to specify more parameters</p>
<pre><code>---
title: &quot;Songs of freedom&quot;
author: &quot;Bob Marley&quot;
geometry: margin=0.5cm
---</code></pre>
</div>
<div id="bibliography" class="section level3">
<h3>bibliography</h3>
<p>To use a bibliography with the pandoc extension insert the following
in the header of the markdown file:</p>
<pre><code>bibliography: /path/to/bibliography/papers.bib</code></pre>
<p>Then the bibliography file should be added to the vim variable
<code>b:pandoc_biblio_bibs</code>. You can check it was added correctly
by calling:</p>
<pre><code>:echo b:pandoc_biblio_bibs</code></pre>
<p>Once the bibliography files is activated, autocomplete can be called
by pressing <code>CTRL-X CTRL-O</code> (or ctrl+space in my case) after
<code>@</code>. For more see:</p>
<pre><code>:help vim-pandoc-bibliographies-module</code></pre>
<p>Bibliography also works with R markdown documents, see rmarkdown
documentation <a
href="https://rmarkdown.rstudio.com/authoring_bibliographies_and_citations.html">authoring
bibliographies and citations</a>.</p>
</div>
</div>
</div>
<div id="edit-a-text-file" class="section level1">
<h1>Edit a text file</h1>
<div id="navigation_edit" class="section level2">
<h2>Switch between navigation and editing mode</h2>
<p>Enter editing mode with <code>i</code>, <code>a</code>,
<code>o</code>. Use escape to switch to navigation mode.</p>
<p>Note: I remapped the caps lock key to escape at a system level. See
the <a href="debian.Rmd">Debian page</a>. Some persons remap
<code>jk</code> and <code>kj</code> to escape (<a
href="https://www.reddit.com/r/vim/comments/11fj3x0/comment/jandf3s/?context=3">reddit</a>).</p>
<pre><code>i - Insert text before the cursor.
I - Insert text before the first non-blank in the line.
gi - Insert text in the same position as where insert mode
     was stopped last time in the current buffer.
a - Append text after the cursor.
A - Move to the end of the line and switch to editing mode .
o - Begin a new line below the cursor and insert text.
O - Begin a new line above the cursor and insert text.
R - Enter Replace mode: Each character you type replaces an existing character.</code></pre>
<p>When in editing mode you can use escape to enter the navigation mode
or use:</p>
<pre><code>alt+h alt+j alt+k alt+l - Switch to navigation mode and move.
alt+: - Switch to navigation mode and send a command.</code></pre>
</div>
<div id="edit-a-whole-line" class="section level2">
<h2>Edit a whole line</h2>
<p>To edit a whole line:</p>
<pre><code>dd to delete a whole line
yy to copy a whole line
p to paste the copied or deleted text after the current line or 
P to paste the copied or deleted text before the current line </code></pre>
</div>
<div id="edit-multiple-lines" class="section level2">
<h2>Edit multiple lines</h2>
<p>You can edit multiple lines simultaneously by <a
href="https://stackoverflow.com/a/253391">inserting text inside a
multi-line selection in Vim</a> :</p>
<pre><code>Use Ctrl+V to enter visual block mode
Move down with jj to select the columns of text in the lines you want to comment.
Then hit Shift+I and type the text you want to insert.
Then press Escape, the inserted text will appear on all lines.</code></pre>
<p>Similarly to enter text at the end of multiple lines (<a
href="http://vim.wikia.com/wiki/Inserting_text_in_multiple_lines">vim.wikia</a>)</p>
<pre><code>Use Ctrl+V to enter visual block mode
Move down with jj to select the columns of text in the lines you want to comment.
Then hit **$** to select all lines until the end of the line.
Then press Shift+A and type the text you want to insert.
The press Escape, the inserted text will appear at the end of all lines.</code></pre>
<p><a
href="https://stackoverflow.com/questions/11303032/how-to-add-text-at-the-end-of-each-line-in-vim">How
to add text at the end of each line in Vim?</a></p>
<blockquote>
<p>“Visual select a paragraph <code>vip</code>, switch to Visual block
mode <code>CTRL V</code>, append to all lines <code>$A</code> a comma ,,
then press Esc to confirm.”</p>
</blockquote>
<div id="insert-a-comma-at-the-end-of-each-line" class="section level3">
<h3>Insert a comma at the end of each line</h3>
<ul>
<li>Enter Visual Block mode: Press <code>Ctrl-v</code></li>
<li>Select the lines: Use <code>j</code> to move down and select the
desired lines.</li>
<li>Append text: Press <code>$A</code> (append after the end of each
line).</li>
<li>Type <code>,</code> and press <code>Esc</code> to exit insert
mode.</li>
</ul>
</div>
<div id="delete-all-lines-that-contain-a-pattern"
class="section level3">
<h3>Delete all lines that contain a pattern</h3>
<p>Delete all lines that contain “pattern”:</p>
<pre><code>:g/pattern/d</code></pre>
<p>Delete all lines that do not contain a pattern:</p>
<pre><code>:g!/pattern/d
:v/pattern/d</code></pre>
<p>See also:</p>
<ul>
<li><p><a
href="https://vim.fandom.com/wiki/Delete_all_lines_containing_a_pattern"
class="uri">https://vim.fandom.com/wiki/Delete_all_lines_containing_a_pattern</a></p></li>
<li><p><a
href="https://superuser.com/questions/265085/how-to-delete-all-lines-that-do-not-contain-a-certain-word-in-vim"
class="uri">https://superuser.com/questions/265085/how-to-delete-all-lines-that-do-not-contain-a-certain-word-in-vim</a></p></li>
</ul>
</div>
<div id="increment-numbers-in-a-list" class="section level3">
<h3>Increment numbers in a list</h3>
<p>Use the <code>range</code> command as explained in the <a
href="https://vim.fandom.com/wiki/Making_a_list_of_numbers">vim
wiki</a>:</p>
<pre><code>:put =range(11,15)</code></pre>
<p>Use the auto incrementation <code>g CTRL-A</code></p>
<pre><code>:help ctrl-a

    {Visual}g CTRL-A Add [count] to the number or alphabetic character in
            the highlighted text. If several lines are
                highlighted, each one will be incremented by an
            additional [count] (so effectively creating a
            [count] incrementing sequence).  {not in Vi}
            For Example, if you have this list of numbers:
                1. ~
                1. ~
                1. ~
                1. ~
            Move to the second &quot;1.&quot; and Visually select three
            lines, pressing `g CTRL-A` results in:
                1. ~
                2. ~
                3. ~
                4. ~</code></pre>
<p>Other example from the vim wiki:</p>
<pre><code>my_array[0] = 0;</code></pre>
<p>Then copy it using <code>Y6p</code> (copy the line and paste it six
times). The result is:</p>
<pre><code>my_array[0] = 0;
my_array[0] = 0;
my_array[0] = 0;
my_array[0] = 0;
my_array[0] = 0;
my_array[0] = 0;
my_array[0] = 0;</code></pre>
<p>Then select the lines from the second line onwards and use
<code>g CTRL-A</code> to get:</p>
<pre><code>my_array[0] = 0;
my_array[1] = 0;
my_array[2] = 0;
my_array[3] = 0;
my_array[4] = 0;
my_array[5] = 0;
my_array[6] = 0;</code></pre>
</div>
<div id="filter-lines-in-a-csv-files" class="section level3">
<h3>Filter lines in a csv files</h3>
<p>Filter a file in place (seen in a blog post called <a
href="https://blog.sanctum.geek.nz/vim-koans/">Vim Kōans</a>)</p>
<pre><code>:%!awk &quot;/paper/{print $4}&quot;</code></pre>
</div>
<div id="sort-lines-alphabetically" class="section level3">
<h3>Sort lines alphabetically</h3>
<p>Select a few lines in visual mode and</p>
<pre><code>:sort</code></pre>
<p>Help sort</p>
<pre><code>With [!] the order is reversed.

    :&#39;&lt;,&#39;&gt;sort!

With [i] case is ignored.

    :&#39;&lt;,&#39;&gt;sort i

With [u] (u stands for unique) only keep the first of
a sequence of identical lines</code></pre>
<p>Sort outside a pattern</p>
<pre><code>When /{pattern}/ is specified and there is no [r] flag
the text matched with {pattern} is skipped, so that
you sort on what comes after the match.
Instead of the slash any non-letter can be used.
For example, to sort on the second comma-separated
field: &gt;
    :sort /[^,]*,/
To sort on the text at virtual column 10 (thus
ignoring the difference between tabs and spaces):
    :sort /.*\%10v/
To sort on the first number in the line, no matter
what is in front of it:
    :sort /.\{-}\ze\d/
(Explanation: &quot;.\{-}&quot; matches any text, &quot;\ze&quot; sets the
end of the match and \d matches a digit.)</code></pre>
<p>Sort within a pattern</p>
<pre><code>With [r] sorting is done on the matching {pattern}
instead of skipping past it as described above.
For example, to sort on only the first three letters
of each line: &gt;
    :sort /\a\a\a/ r</code></pre>
</div>
<div id="reverse-selected-lines" class="section level3">
<h3>Reverse selected lines</h3>
<p>Super User <a
href="https://superuser.com/questions/189947/how-do-i-reverse-selected-lines-order-in-vim">reverse
selected lines</a></p>
<p>Select the paragraph and use the GNU <code>tac</code> command:</p>
<pre><code>:&#39;&lt;,&#39;&gt;!tac`</code></pre>
<p>To reverse the order of lines in a paragraph, you can use
<code>vip</code> to select the current paragraph, followed by
<code>!</code> which automatically inserts <code>:'&lt;,'&gt;!</code>
followed by <code>tac</code>. In short what you end up tipping to
reverse the current paragraph is <code>vip!tac</code>.</p>
</div>
</div>
<div id="edit-zip-files" class="section level2">
<h2>Edit zip files</h2>
<p>It’s possible to edit text files inside a zip archive with vim. Open
the file as such:</p>
<pre><code>vim file.zip</code></pre>
</div>
<div id="align-columns" class="section level2">
<h2>Align columns</h2>
<p>The tabular plugin provides a Tabular command which can be
abbreviated to <code>:Tab</code>. To align a latex table with the
tabular package. Select a few lines, then press:</p>
<pre><code>:&#39;&lt;,&#39;&gt;Tab /&amp;</code></pre>
<p>Align tab separated text in the current buffer (to view tsv files
generated from data frames by NVim-R for example):</p>
<pre><code>:Tab /\t</code></pre>
<p>Or enter CTRL + V and press the TAB key for a literal tab.</p>
<p>To have numbers right aligned</p>
<pre><code>:Tab /\t/r0</code></pre>
<div id="markdown-table" class="section level3">
<h3>Markdown table</h3>
<p>Similarly to align a markdown table, select a few lines, then
call:</p>
<pre><code>:&#39;&lt;,&#39;&gt;Tab /|</code></pre>
<p>For more, see <code>help tabular</code>.</p>
</div>
</div>
<div id="undo-redo" class="section level2">
<h2>Undo redo</h2>
<pre><code>u: undo last change (can be repeated to undo preceding commands)
Ctrl-R: Redo changes which were undone (undo the undos). 
Compare to &#39;.&#39; to repeat a previous change, at the current cursor position.
Ctrl-R will redo a previously undone change, wherever the change occurred. </code></pre>
<div id="navigate-the-change-list" class="section level3">
<h3>Navigate the change list</h3>
<p>Jump to previous or next editing position <code>:help g;</code></p>
<blockquote>
<p>When making a change the cursor position is remembered. One position
is remembered for every change that can be undone, unless it is close to
a previous change. Two commands can be used to jump to positions of
changes, also those that have been undone:</p>
<pre><code>                      *g;* *E662*</code></pre>
<p>g; Go to [count] older position in change list. If [count] is larger
than the number of older change positions go to the oldest change. If
there is no older change an error message is given. (not a motion
command) {not available without the |+jumplist| feature}</p>
<pre><code>                      *g,* *E663*</code></pre>
<p>g, Go to [count] newer cursor position in change list. Just like |g;|
but in the opposite direction. (not a motion command) {not available
without the |+jumplist| feature}</p>
</blockquote>
</div>
</div>
<div id="replace-characters" class="section level2">
<h2>Replace characters</h2>
<p>Vim help on search and replace <code>:help :s</code></p>
<blockquote>
<p><code>[range]s[ubstitute]/{pattern}/{string}/[flags] [count]</code>
For each line in <code>[range]</code> replace a match of
<code>{pattern}</code> with <code>{string}</code>.</p>
</blockquote>
<p>For example find each occurrence of ‘red’ (in the current line only),
and replace it with ‘green’:</p>
<pre><code>:s/red/green/g</code></pre>
<p>The <code>s</code> command means “substitute”. The <code>g</code>
means “greedy”, it will replace all occurrences of the word on a line
(not just the first occurrence).</p>
<p>When <a
href="http://vim.wikia.com/wiki/Search_and_replace_in_a_visual_selection">text
is visually selected</a>, press : to enter a command. The command line
will automatically enter the range:</p>
<pre><code>:&#39;&lt;,&#39;&gt;</code></pre>
<p>Then you can enter a replacement command such as
<code>s/red/green/g</code> to replace each occurence of “red” with
“green” in all lines of the visual selection. The command will appear
as:</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/red/green/g</code></pre>
<p>Find each occurrence of ‘red’ in all lines (<code>%s</code>), and
replace it with ‘green’.</p>
<pre><code>:%s/red/green/g </code></pre>
<p>Find each occurence of foo but don’t perform the replacement, only
count the number of occurences</p>
<pre><code>:%s/foo/bar/n</code></pre>
<p>To replace by a new line character, use <code>\r</code> instead of
<code>\n</code>. For example to insert a new line after each comma in a
selection:</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/,/,\r/g</code></pre>
<p>To replace double line breaks by a single line brake</p>
<pre><code>:%s/\n\n/\r/g</code></pre>
<p>You can use replacement to remove text. For example to <a
href="https://stackoverflow.com/a/36264759/2641825">remove the last 2
characters of each line in a selection</a> :</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/..$//</code></pre>
<div id="other-delimiter-for-path-replacement" class="section level3">
<h3>Other delimiter for path replacement</h3>
<p>In case you have slashes in the pattern, you can use another
delimitor such as <code>#</code></p>
<pre><code>:%s#/path/to/file#/new/path#g</code></pre>
<p>For example to replace a path by nothing</p>
<pre><code>:%s#/home/paul/repos/eu_cbm/eu_cbm_data/output/reference/IE/0/input/csv/##g</code></pre>
<p>See also:</p>
<ul>
<li><a
href="https://stackoverflow.com/questions/11823616/how-to-include-forward-slash-in-vi-search-replace"
class="uri">https://stackoverflow.com/questions/11823616/how-to-include-forward-slash-in-vi-search-replace</a></li>
</ul>
</div>
<div id="abbreviations-and-boilerplate-code" class="section level3">
<h3>Abbreviations and boilerplate code</h3>
<p>Add a read counter item to a list of papers to read</p>
<pre><code>iabbrev azer - {1}</code></pre>
<ul>
<li><p>Vim wiki <a
href="https://vim.fandom.com/wiki/Use_abbreviations_for_frequently-used_words">abbreviations</a></p>
<p>iabbrev teh the</p></li>
<li><p><a
href="https://stackoverflow.com/questions/55469524/how-to-write-vim-function-to-paste-a-template-text-into-current-file">SO
question on boilerplate code</a></p></li>
</ul>
</div>
<div id="collection" class="section level3">
<h3>Collection</h3>
<p>See <code>:help collection</code>: “A collection is a sequence of
characters enclosed in brackets.”</p>
<pre><code>Example     matches ~
[xyz]       any &#39;x&#39;, &#39;y&#39; or &#39;z&#39;
[^xyz]&quot;     anything but &#39;x&#39;, &#39;y&#39; and &#39;z&#39;
[a-zA-Z]$   any alphabetic character at the end of a line</code></pre>
<p>For example to replace all characters but the pipe (to create a
separation in a markdown table):</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/[^\|]/-/g</code></pre>
</div>
<div id="confirm-replacement" class="section level3">
<h3>Confirm replacement</h3>
<p>Find and replace with confirmation</p>
<pre><code>:%s/old/new/gc </code></pre>
<p>Press <code>y</code> or <code>n</code> to confirm each replacement
individually.</p>
</div>
<div id="convert-to-lower-case" class="section level3">
<h3>Convert to lower-case</h3>
<p><a
href="https://vim.fandom.com/wiki/Switching_case_of_characters">Switching
case of characters</a>:</p>
<pre><code>Toggle case &quot;HellO&quot; to &quot;hELLo&quot; with g~ then a movement.
Uppercase &quot;HellO&quot; to &quot;HELLO&quot; with gU then a movement.
Lowercase &quot;HellO&quot; to &quot;hello&quot; with gu then a movement.</code></pre>
<p>For example to convert to lower case from the cursor to the end of
the line:</p>
<pre><code>gu$</code></pre>
<p>To change the current line from upper to lower case:</p>
<pre><code>guu</code></pre>
</div>
<div id="grouping-and-back-references" class="section level3">
<h3>Grouping and back references</h3>
<p><a href="http://vimregex.com/" class="uri">http://vimregex.com/</a>
Grouping and Backreferences</p>
<blockquote>
<p>“ou can group parts of the pattern expression enclosing them with
<code>"\(" and "\)"</code> and refer to them inside the replacement
pattern by their special number \1, \2 … \9. Typical example is swapping
first two words of the line:</p>
</blockquote>
<pre><code>s:\(\w\+\)\(\s\+\)\(\w\+\):\3\2\1:</code></pre>
<blockquote>
<p>” where \1 holds the first word, \2 - any number of spaces or tabs in
between and \3 - the second word. How to decide what number holds what
pair of () ? - count opening <code>"\("</code> from the left. ”</p>
</blockquote>
<div id="keep-only-quoted-strings" class="section level4">
<h4>Keep only quoted strings</h4>
<p>A simpler version in the case of character strings only</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/.*\(&quot;.*&quot;\).*/\1/g
# Paste ready version
s/.*\(&quot;.*&quot;\).*/\1/g</code></pre>
<p>Suggestion and explanation by Chat GPT</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/.*\(&quot;\([^&quot;]\+\)&quot;\).*/\1/g</code></pre>
<p>Explanation:</p>
<ul>
<li><code>.*</code> Matches any character zero or more times.</li>
<li><code>\("([^"]\+)"\)</code> This is the capturing group for the
quoted string. It captures anything between quotes and stores it in
\1.</li>
<li><code>.*</code> Matches any character zero or more times.</li>
<li><code>\1</code> This replaces the entire line with just the first
capturing group, which is your quoted string.</li>
</ul>
</div>
</div>
<div id="html-markup" class="section level3">
<h3>HTML markup</h3>
<p><a href="https://stackoverflow.com/a/6264260/2641825">Remove html
tags, not the content</a></p>
<pre><code>yitvatp</code></pre>
</div>
<div id="markdown-fixes" class="section level3">
<h3>Markdown fixes</h3>
<p>Several search and replace patterns to fix text copied from web pages
or pdf files into markdown.</p>
<p>Place quotes around variables that contain a dollar sign (otherwise
interpreted as a formula start in markdown):</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/\(\w*\$\)/`\1`/g</code></pre>
<p>Remove hyphenation at the end of lines in a paragraph</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/\(\i\)- /\1/g</code></pre>
<p>I put this into a command in my  <code>.vimrc</code></p>
<pre><code>command! -range=% Hyphen &lt;line1&gt;,&lt;line2&gt;s/\(\i\)- /\1/g</code></pre>
<p>TODO: “the 30- year average” should not be replace but only by a
space.</p>
</div>
<div id="regex-patterns" class="section level3">
<h3>Regex patterns</h3>
<p>To place quotes around variables that contain a dollar sign
(otherwise interpreted as a formula start in markdown):</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/\(\w*\$\)/`\1`/g</code></pre>
<p><a href="https://stackoverflow.com/a/3218805/2641825">add quotes at
the start and end of each line</a></p>
<pre><code>:%s/^\(.*\)$/&quot;\1&quot;/</code></pre>
<blockquote>
<p>s/regex/replace/ is vim command for search n replace. % makes it
apply throughout the file ^ and $ denotes start and end of the line
respectively. <code>(.*)</code> captures everything in between. ( and )
needs to be escaped in vim regexes. \1 puts the captured content between
two quotes.</p>
</blockquote>
<p>Remove bracketed references from text copied from Wikipedia.</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/\[[0-9]\+\]//g</code></pre>
<div id="character-classes" class="section level4">
<h4>Character classes</h4>
<p>See also patterns below.</p>
<p>See <code>:help character-classes</code> for a list of classes
accepted in Vim with their equivalent regex pattern, for example
<code>\w</code> is equivalent to <code>[0-9A-Za-z_]</code>. Replace all
word characters by a dash (to create a markdown table division see also
collection below)</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/\w/-/g</code></pre>
<p>Note that this only works with ASCII characters and doesn’t work with
accentuated characters. For example <code>smöl</code> gets replaced by
<code>--ö-</code>. To replace all identifier characters, use</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/\i/-/g</code></pre>
<p>And then <code>smöl</code> gets replaced by <code>----</code>.</p>
</div>
<div id="numbers" class="section level4">
<h4>Numbers</h4>
<p>Insert Markdown title marker <code>#</code> before a number at the
beginning of a line</p>
<pre><code>%s/^\(\d.\)/# \1/g</code></pre>
<p>Note <code>\0</code> matches the hole pattern. Use backslash-escaped
parenthesis to match a particular pattern. <code>\d</code> matches any
digit.</p>
<p>Remove bracketed references from text copied from Wikipedia.</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/\[[0-9]\+\]//g</code></pre>
<p>Remove all numbers in a list of authors</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/\d//g</code></pre>
</div>
<div id="or" class="section level4">
<h4>Or</h4>
<p>Replace this or that with a dot</p>
<pre><code>:%s/this\|that/./g</code></pre>
<p>Replace opening or closing curly braces by two curly braces</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/{/{{/g | s/}/}}/g</code></pre>
</div>
<div id="spaces-and-new-lines" class="section level4">
<h4>Spaces and new lines</h4>
<p>Replace the text even if the spaces are sometimes spaces and
sometimes new lines</p>
<pre><code>:%s/Hilfe\_s*zum\_s*Begriff\_s*anzeigen//g</code></pre>
</div>
</div>
<div id="replace-list-items" class="section level3">
<h3>Replace list items</h3>
<p>Replace simple list items with a curly braces counter (to count the
number of times I want to read a publication or a paper). I have created
a shortcut for this substitution.</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/\n- /\r- {1} /g</code></pre>
<div id="replace-file-names-with-markdown-links" class="section level4">
<h4>Replace file names with markdown links</h4>
<p>List files in the present working directory and replace them with a
markdown link:</p>
<pre><code>:.!ls
:&#39;&lt;,&#39;&gt;s/.*/[&amp;](&amp;)/g</code></pre>
</div>
</div>
<div id="replace-spaces-and-new-lines" class="section level3">
<h3>Replace spaces and new lines</h3>
<p>Vim wiki <a
href="https://vim.fandom.com/wiki/Remove_unwanted_spaces#Automatically_removing_all_trailing_whitespace">Remove
unwanted spaces</a>:</p>
<blockquote>
<p>In a search, finds white space (a space or a tab), and + finds one or
more occurrences. Command to replace repeated white spaces by a single
white space in a selection:</p>
</blockquote>
<pre><code>:&#39;&lt;,&#39;&gt;s/\s\+/ /g</code></pre>
<p>SO <a
href="https://stackoverflow.com/questions/3860532/vim-regex-replace-multiple-consecutive-spaces-with-only-one-space">vim
regex replace multiple consecutive spaces with only one space</a>
proposes multiple other solutions, this one derived from Aristotle’s
answer keeps indentation white spaces at the beginning of the line:</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/[^\s]\zs\s\+/ /g</code></pre>
<p>Remove all beginnings of line. :%s//, /g replace all end of line by
comma + space. This cleans an html list of species for inclusion in a
text.</p>
<pre><code> %s/option value=&quot;.*&quot;//g </code></pre>
<p>This pattern replaces one or more white spaces with a pipe, to create
markdown tables:</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/\s\+/|/g</code></pre>
<p>This pattern removes spaces at the end of the line:</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/\s*$//g</code></pre>
</div>
<div id="visual-selection" class="section level3">
<h3>Visual selection</h3>
<p>To search and replace in a visual selection, select an area then
press <code>:</code>. The line will automatically begin with
<code>:'&lt;,'&gt;</code>, you can then enter the patterns.</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/search/replace/g</code></pre>
<p>For <a href="https://stackoverflow.com/a/25276670/2641825">a vertical
selection</a>, this doesn’t work automatically and you have to use</p>
<pre><code>:&#39;&lt;,&#39;&gt;s/\%Vsearch/replace/g</code></pre>
<p>To replace a visual selection by inserting new text at the keyboard
in insert mode, use <code>c</code> for change:</p>
<pre><code>c</code></pre>
</div>
</div>
<div id="copy-cut-and-paste" class="section level2">
<h2>Copy, cut and paste</h2>
<p>Copy</p>
<pre><code>yy            The current line
yiw           The current word
ye            To the end of the current word
yip           The current paragraph
yG            To the end of the document</code></pre>
<p>Paste with <code>P</code> (before) or <code>p</code> (after) the
cursor.</p>
<p>Copy just one character</p>
<pre><code>vy</code></pre>
<p>Copy and paste in visual mode with the following instructions:</p>
<pre><code>Position the cursor where you want to begin cutting.
Press v (or upper case V if you want to cut whole lines).
Move the cursor to the end of what you want to cut.
Press d to cut or y to yank (copy into the `&quot;0` register).
Move to where you would like to paste.
Press P to paste before the cursor, or p to paste after. </code></pre>
<p>Copy to a system register (to be used by other programs)</p>
<pre><code>&quot;+yy
&quot;+yip</code></pre>
<p>See also the section on registers below and <code>:help "+</code> for
more details on system registers.</p>
<div id="paste-the-current-line-many-times" class="section level3">
<h3>Paste the current line many times</h3>
<p>Press <code>Y6p</code> to copy the following line 6 times</p>
<pre><code>- example</code></pre>
</div>
<div id="paste-from-the-system-register" class="section level3">
<h3>Paste from the system register</h3>
<p>When pasting from the system register i.e. with
<code>Ctrl+Shift+V</code> you need to prevent auto indent otherwise vim
will mess with the indentation. This can be solved with bracketed paste,
see further down below.</p>
<p>As explained in <a
href="https://stackoverflow.com/a/2545242/2641825">Paste without
autoindent</a> You can either read from the shell with:</p>
<pre><code>:r! cat </code></pre>
<p>And then paste <code>CTRL + SHIFT + V</code> the content, and
<code>CTRL+D</code>. Also works over SSH.</p>
<p>Or use</p>
<pre><code>:set paste
:set nopaste</code></pre>
<p>Set up a shortcut to toggle paste mode on and off with:</p>
<pre><code>set pastetoggle=&lt;F3&gt;</code></pre>
<p>Note: I don’t use paste toggle any more, bracketed paste works
well.</p>
<div id="bracketed-paste" class="section level4">
<h4>Bracketed paste</h4>
<p><a href="https://stackoverflow.com/a/44507798/2641825">Enable
bracketed paste in a session</a></p>
<pre><code>bind &#39;set enable-bracketed-paste on&#39;    </code></pre>
</div>
</div>
<div id="registers" class="section level3">
<h3>Registers</h3>
<p><a href="https://stackoverflow.com/a/1498026/2641825">How to use vim
registers</a></p>
<blockquote>
<p>” Registers in Vim let you run actions or commands on text stored
within them. To access a register, you type “a before a command, where a
is the name of a register. If you want to copy the current line into
register k, you can type</p>
</blockquote>
<pre><code>&quot;kyy</code></pre>
<blockquote>
<p>Or you can append to a register by using a capital letter</p>
</blockquote>
<pre><code>&quot;Kyy</code></pre>
<blockquote>
<p>You can then move through the document and paste it elsewhere
using</p>
</blockquote>
<pre><code>&quot;kp</code></pre>
<p>To display the content of all registers:</p>
<pre><code>:registers</code></pre>
<p>For example yank the word “yank”, delete the word “delete” and copy
the word “system” outside of vim in any program will give you the
following registers:</p>
<pre><code>:registers
--- Registers ---
&quot;&quot;   delete
&quot;0   yank
&quot;-   delete
&quot;*   system
&quot;+   system
&quot;.   ^@yank^@delete^@</code></pre>
<p>To clean vim registers as explained on a <a
href="https://stackoverflow.com/a/41003241/2641825">SO answer</a>, enter
this at the vim prompt:</p>
<pre><code>for i in range(34,122) | silent! call setreg(nr2char(i), []) | endfor</code></pre>
</div>
<div id="replace-a-word" class="section level3">
<h3>Replace a word</h3>
<p><a
href="https://unix.stackexchange.com/questions/88714/how-can-i-do-a-change-word-in-vim-using-the-current-paste-buffer">How
can I do a change word in vim using the current paste buffer</a></p>
<p>Select the current word, then select the word to replace and
paste</p>
<pre><code>ye
vep</code></pre>
<p>Or select the current word, then paste and delete the word to
replace</p>
<pre><code>ye
Plde</code></pre>
<p>Note this works only for one replacement because the yank register is
then replaced with the deleted word.</p>
</div>
<div id="a-single-character" class="section level3">
<h3>A single character</h3>
<p>Copy a single character at the cursor position</p>
<pre><code>vy
xu</code></pre>
<p>Copy a character before the cursor position</p>
<pre><code>Xu</code></pre>
<p>Cut a single character, then paste it later</p>
<pre><code>x
p</code></pre>
<p>From a <a
href="https://vi.stackexchange.com/questions/5806/how-can-i-yank-copy-the-single-character-on-which-the-cursor-rests/5825#5825">Stack
Exchange question on how to copy a single character in vim</a></p>
</div>
</div>
<div id="indentation" class="section level2">
<h2>Indentation</h2>
<p>Indentation replaced by spaces, add this to the ~/.vimrc file</p>
<pre><code>set tabstop=4
set expandtab
set softtabstop=4
set shiftwidth=4
filetype indent on </code></pre>
<p>More details on vim indentation in the <a
href="https://wiki.python.org/moin/Vim">python wiki</a>. In particular
the page <a
href="https://vim.fandom.com/wiki/How_to_stop_auto_indenting">How to
stop auto indentation</a> explains how to display indentation setting
for the current file type:</p>
<pre><code>:verbose set ai? cin? cink? cino? si? inde? indk?</code></pre>
</div>
<div id="save-files" class="section level2">
<h2>Save files</h2>
<p>Save the current file</p>
<pre><code>:w</code></pre>
<div id="rename-a-file-save-as" class="section level3">
<h3>Rename a file, save as</h3>
<p>Save under a new name (save as) and edit that file</p>
<pre><code>:sav
:saveas</code></pre>
<p>SO <a
href="https://stackoverflow.com/questions/4980168/how-to-save-as-a-new-file-and-keep-working-on-the-original-one-in-vim">save
as a new file and continue editing the original one</a></p>
<p>To move or rename a file within the vim file explorer:</p>
<pre><code>R</code></pre>
</div>
<div id="autosave" class="section level3">
<h3>Autosave</h3>
<ul>
<li><p><a
href="https://vi.stackexchange.com/questions/74/is-it-possible-to-make-vim-auto-save-files/79#79"
class="uri">https://vi.stackexchange.com/questions/74/is-it-possible-to-make-vim-auto-save-files/79#79</a>
suggests</p>
<blockquote>
<p>One possible way to implement this is to use the CursorHold
autocommand event. This event is triggered when the user hasn’t pressed
a key for ‘updatetime’ milliseconds.</p>
</blockquote>
<pre><code>  autocmd CursorHold * update</code></pre>
<blockquote>
<p>The :update command only saves the buffer if it is modified. If you
also wanted this to happen while insert mode is active, CursorHoldI
could be added to the event list.</p>
</blockquote>
<pre><code>  autocmd CursorHold,CursorHoldI * update</code></pre>
<ul>
<li><p>Show the value of the update time</p>
<p>:set updatetime?</p></li>
</ul></li>
<li><p><a href="https://stackoverflow.com/a/34814520/2641825"
class="uri">https://stackoverflow.com/a/34814520/2641825</a> says
that</p>
<blockquote>
<p>“<code>:update</code> is better suited than <code>:write</code>,
because it only actually saves when there are unpersisted updates.”</p>
</blockquote></li>
<li><p><a
href="https://stackoverflow.com/questions/6991638/how-to-auto-save-a-file-every-1-second-in-vim"
class="uri">https://stackoverflow.com/questions/6991638/how-to-auto-save-a-file-every-1-second-in-vim</a>
suggests</p>
<pre><code>  autocmd TextChanged,TextChangedI &lt;buffer&gt; silent write</code></pre></li>
<li><p><a
href="https://stackoverflow.com/questions/17365324/auto-save-in-vim-as-you-type/55761306#55761306"
class="uri">https://stackoverflow.com/questions/17365324/auto-save-in-vim-as-you-type/55761306#55761306</a>
(duplicate of the previous one)</p></li>
<li><p><a
href="https://www.reddit.com/r/vim/comments/ywzeu3/autosave_file/?rdt=63220&amp;onetap_auto=true"
class="uri">https://www.reddit.com/r/vim/comments/ywzeu3/autosave_file/?rdt=63220&amp;onetap_auto=true</a>
suggests</p>
<pre><code>  autocmd CursorHoldI,CursorHold * silent! update</code></pre></li>
</ul>
</div>
</div>
<div id="wrap-lines-auto-line-break" class="section level2">
<h2>Wrap lines, auto line break</h2>
<p>Thoughtbot.com <a
href="https://thoughtbot.com/blog/wrap-existing-text-at-80-characters-in-vim">Wrap
existing block of text to 80 characters</a>:</p>
<pre><code>:set textwidth=80</code></pre>
<p>Apply automatically to markdown files, by adding this to .vimrc</p>
<pre><code>au BufRead,BufNewFile *.md setlocal textwidth=80</code></pre>
<p>To format the text, select it with v and up or down movements, and
press</p>
<pre><code>gq</code></pre>
<p>I defined a custom shortcut <code>Ctrl+P</code> to wrap a
paragraph</p>
<pre><code>au BufRead,BufNewFile *.md map &lt;C-P&gt; vipJgqk</code></pre>
<p>Note vim behaves differently when opening a markdown file from the
vim file explorer as opposed to opening that file directly. When opening
the directory at the command line first and then opening the file from
the vim file explorer, lines wrap at 80 characters.</p>
<pre><code>vim paper/</code></pre>
<p>When opening the file at the command line directly, lines wrap at 88
characters.</p>
<p>vim paper/paper.md</p>
<p>How can this be fixed by changing the autocommand?</p>
<div id="disable-auto-wrap" class="section level3">
<h3>Disable auto wrap</h3>
<p>To disable auto wrapping, call</p>
<pre><code>:set formatoptions=cq</code></pre>
<p>In <code>.vimrc</code>, I defined a <code>Nowrap</code> command to
disable auto wrap to edit long tables for example</p>
<pre><code>command! Nowrap set formatoptions=cq</code></pre>
<p>Usage:</p>
<pre><code>:Nowrap</code></pre>
<p><a href="https://stackoverflow.com/a/23032068/2641825">SO answer on
how to disable auto wrapping</a>. It’s necessary to distinguish hard
wraps which are actual line breaks in the text file from soft wraps
which appear only on screen.</p>
</div>
</div>
<div id="word-count" class="section level2">
<h2>Word count</h2>
<ul>
<li><a href="https://vim.fandom.com/wiki/Word_count"
class="uri">https://vim.fandom.com/wiki/Word_count</a></li>
</ul>
<blockquote>
<p>“To count the number of words in the current buffer, press g then
Ctrl-g.”</p>
</blockquote>
<p>To see how many words are in the current file, run:</p>
<pre><code>:! wc %</code></pre>
</div>
</div>
<div id="select-and-visual-mode" class="section level1">
<h1>Select and visual mode</h1>
<p>Vim documentation</p>
<pre><code>:help visual-use</code></pre>
<p><a
href="https://vi.stackexchange.com/questions/4891/what-is-the-select-mode-and-when-is-it-relevant-to-use-it">Difference
between visual and select mode</a></p>
<p>Various ways to select text in visual mode</p>
<pre><code>vt&lt;char&gt; - till before a given character
vf&lt;char&gt; - till a given character</code></pre>
<p>Select the current paragraph:</p>
<pre><code>vip</code></pre>
<p>Select the current word:</p>
<pre><code>viw</code></pre>
<p>Select what is in the current parenthesis block</p>
<pre><code>vi(</code></pre>
<p>Select what is inside the current quote block</p>
<pre><code>vi&quot;</code></pre>
<p>Select the current line</p>
<pre><code>V</code></pre>
<p>These selection methods can also be used to delete <code>diw</code>
and yank <code>yiw</code>.</p>
</div>
<div id="commands" class="section level1">
<h1>Commands</h1>
<p>Commands are everywhere in this vim page. This is a generic sections
on commands that talks about command history and how to repeat commands
for example. See also how to create your own commands under the section
called configure vim in <code>.vimrc</code>.</p>
<div id="enter-commands-save-and-quit-for-beginners"
class="section level2">
<h2>Enter commands, save and quit for beginners</h2>
<p>To enter edit mode:</p>
<pre><code>i</code></pre>
<p>To enter command mode:</p>
<pre><code>escape</code></pre>
<p>To exit vim, go in command mode and enter the following command:</p>
<pre><code>:q</code></pre>
<p>To exit without saving the content of the file:</p>
<pre><code>:q!</code></pre>
<p>To save the content of the file:</p>
<pre><code>:w</code></pre>
<p>If you accidentally press CTRL+S the <a
href="https://askubuntu.com/a/264253/315347">terminal will hang</a>
Press <code>CTRL+Q</code> to regain control. See also <a
href="https://unix.stackexchange.com/questions/72086/ctrl-s-hang-terminal-emulator">Ctrl-s
hang terminal emulator?</a> which provides a workaround: entering
<code>stty -ixon</code> in .bashrc.</p>
<p>To save content and exit:</p>
<pre><code>:wq</code></pre>
</div>
<div id="command-history" class="section level2">
<h2>Command history</h2>
<p>To find a command in the command history, enter the first few letter
at the <code>:</code> prompt, then press the up arrow of the
keyboard.</p>
<p>Display the command history</p>
<pre><code>q:</code></pre>
</div>
<div id="repeat-commands" class="section level2">
<h2>Repeat Commands</h2>
<p><a href="http://vimhelp.appspot.com/repeat.txt.html">Repeating
commands, Vim scripts and debugging</a></p>
</div>
</div>
<div id="email-with-mutt" class="section level1">
<h1>Email with Mutt</h1>
<p>See also the [debian.html] page. The Arch Linux <a
href="https://wiki.archlinux.org/index.php/Mutt#Installation">wiki page
on Mutt</a> has a section explaining how to set it up with vim.</p>
</div>
<div id="help" class="section level1">
<h1>Help</h1>
<pre><code>:help - vim help
:help commandname - help on a particular command
:h commandname - help on a particular command
CTRL+] - jump to a highlighted topic. I remapped it to `ctrl %`.
CTRL+T - jump backwards</code></pre>
<p><a href="http://vimhelp.appspot.com/">HTML version of the Vim help
pages</a> kept up-to-date automatically from the <a
href="https://github.com/vim/vim">Vim source repository</a>.</p>
<div id="messages" class="section level2">
<h2>Messages</h2>
<p>Did you see warning messages but they disappeared before you have had
time to read them? Type the command |:messages| in Normal mode to see
them again. (copied from nvim-r help)</p>
</div>
</div>
<div id="insert" class="section level1">
<h1>Insert</h1>
<div id="current-file-name" class="section level2">
<h2>Current file name</h2>
<p><a
href="https://unix.stackexchange.com/questions/57555/how-do-i-insert-the-current-filename-into-the-contents-in-vim">Insert
the current file name in VIM</a> In insert mode press:</p>
<pre><code>&lt;c-r&gt;%</code></pre>
<p>In normal mode:</p>
<pre><code>:r! echo %</code></pre>
</div>
<div id="content-of-another-file" class="section level2">
<h2>Content of another file</h2>
<p>In normal mode, insert the content of another file:</p>
<pre><code>:read /tmp/newdir/file1.txt</code></pre>
<p>Insert the content of a file from the network:</p>
<pre><code>:Nread https://www.wikipedia.org/</code></pre>
<p>For more, see <code>:help Nread</code>.</p>
</div>
<div id="date-or-time" class="section level2">
<h2>Date or time</h2>
<p>Vim wiki <a
href="https://vim.fandom.com/wiki/Insert_current_date_or_time">insert
date or time</a></p>
<p>I added the following command to my .vimrc:</p>
<pre><code>command! Date put =strftime(&#39;%Y-%m-%d&#39;)</code></pre>
</div>
</div>
<div id="multiple-files-buffers-and-windows" class="section level1">
<h1>Multiple files, buffers and windows</h1>
<div id="buffers" class="section level2">
<h2>Buffers</h2>
<pre><code>:e filename - edit another file 
:ls         - show current buffers
:b 2        - open buffer #2 in this window
:b filename - open buffer #filename in this window
:bd         - close the current buffer (! to forget changes)
:bd filename -close a buffer by name </code></pre>
<p>Reload the file in the current buffer:</p>
<pre><code>:e</code></pre>
</div>
<div id="quickfix-window" class="section level2">
<h2>Quickfix window</h2>
<p>Open the quickfix window with:</p>
<pre><code>:copen</code></pre>
<p>The result of some search operation seach as grep can be displayed in
the quick fix window.</p>
</div>
<div id="tabs-should-be-called-workspaces" class="section level2">
<h2>Tabs should be called workspaces</h2>
<p><a
href="https://stackoverflow.com/questions/26708822/why-do-vim-experts-prefer-buffers-over-tabs/26710166#26710166">Why
do vim experts prefer buffers over tabs?</a> &gt; ““Vim experts” don’t
prefer buffers over tabs: they use buffers as the file &gt; proxies they
are and tab pages as the workspaces they are. Buffers and tab &gt; pages
have different purposes”</p>
<p>Open a file in a new tab</p>
<pre><code>:tabnew {file}</code></pre>
<p>Move to the next tab</p>
<pre><code>gt</code></pre>
<p>Move to the previous tab</p>
<pre><code>gT</code></pre>
<p>Open the file under the cursor in a new tab</p>
<pre><code>CTRL-W gf   Open a new tab page and edit the file name under the cursor.
        See |CTRL-W_gf|.

CTRL-W gF   Open a new tab page and edit the file name under the cursor
        and jump to the line number following the file name.
        See |CTRL-W_gF|.</code></pre>
<p>See <code>:help tabpage</code> for more instructions.</p>
</div>
<div id="window-split" class="section level2">
<h2>Window split</h2>
<pre><code>:sp[lit] filename  - split window and load another file
:10sp - specify the split height with a number
:vs[plit] - same but split vertically  
ctrl-w up arrow - move cursor up a window
ctrl-w ctrl-w   - move cursor to another window (cycle)
ctrl-w_         - maximize current window
ctrl-w=         - make all equal size
CTRL+z - suspend the process and get back to the shell
fg - get back to vim</code></pre>
<p><a
href="https://robots.thoughtbot.com/vim-splits-move-faster-and-more-naturally#easier-split-navigations">Easier
split navigations</a></p>
<pre><code>nnoremap &lt;C-J&gt; &lt;C-W&gt;&lt;C-J&gt;
nnoremap &lt;C-K&gt; &lt;C-W&gt;&lt;C-K&gt;
nnoremap &lt;C-L&gt; &lt;C-W&gt;&lt;C-L&gt;
nnoremap &lt;C-H&gt; &lt;C-W&gt;&lt;C-H&gt; </code></pre>
<p>Natural split opening</p>
<pre><code>set splitbelow
set splitright</code></pre>
<p>Open an existing buffer (from the buffer list) in a new split</p>
<pre><code>:sb buffername</code></pre>
<p>For a vertical split</p>
<pre><code>:vert sb buffername</code></pre>
<div id="open-vim-with-two-files-in-two-splits-or-more"
class="section level3">
<h3>Open vim with two files in two splits or more</h3>
<p><a
href="https://vi.stackexchange.com/questions/732/how-to-open-multiple-files-in-split-mode">ViM
Stack exchange</a> Open 2 files in 2 horizontal splits</p>
<pre><code>vim -o file1.md file2.md</code></pre>
<p>Limit the number of splits</p>
<pre><code>vim -o2 *.md</code></pre>
<p>Open files in vertical splits</p>
<pre><code>vim -O file1.md file2.md</code></pre>
</div>
<div id="split-resize" class="section level3">
<h3>Split resize</h3>
<p>Set current window height to 10 lines</p>
<pre><code>res 10</code></pre>
<p>Set current window width to 100 characters</p>
<pre><code>vertical res 100</code></pre>
<p>See <code>:help resize</code> for more commands. There are many
possible key combinations to resize the window.</p>
<pre><code>:res[ize] [N]
CTRL-W CTRL-_                   *CTRL-W_CTRL-_* *CTRL-W__*
CTRL-W _    Set current window height to N (default: highest possible).
z{nr}&lt;CR&gt;   Set current window height to {nr}.</code></pre>
<p>Change the height of the current window by increments of 10:</p>
<pre><code>:res +10</code></pre>
<p>Change the with of the current window by increments of 10:</p>
<pre><code>:vert res +10</code></pre>
<p>Set the height of the terminal buffer to 10 lines</p>
<pre><code>:set termwinsize=10x0</code></pre>
</div>
<div id="split-zoom-in-and-out" class="section level3">
<h3>Split zoom in and out</h3>
<p><a href="https://stackoverflow.com/a/30362564/2641825">zoom windows
in vim</a></p>
<pre><code>c-w-| to have window take over (if using vsplits). 
c-w-_ for horizontal splits
c-w-= to restore. </code></pre>
</div>
<div id="split-and-buffers" class="section level3">
<h3>Split and buffers</h3>
<p><a
href="https://stackoverflow.com/questions/4465095/vim-delete-buffer-without-losing-the-split-window">Delete
buffer without losing the split window</a></p>
<pre><code>bp|bd #</code></pre>
</div>
</div>
<div id="vim-and-tmux" class="section level2">
<h2>Vim and Tmux</h2>
<p>See the <a href="bash.html">bash</a> page for the tmux side of the
configuration.</p>
<p>I use the <a
href="https://github.com/christoomey/vim-tmux-navigator">vim-tmux-navigator</a></p>
<p>It doesn’t work in a terminal buffer because of conflicts with fuzzy
file search. <a
href="https://github.com/christoomey/vim-tmux-navigator/pull/172">issue
172</a></p>
<p><a
href="https://superuser.com/questions/1467829/vim-tmux-navigator-to-use-tmux-prefix-instead-of-c-hjkl">vim-tmux-navigator
to use tmux prefix instead of C-[hjkl]</a></p>
<p>busnag.com <a href="https://www.bugsnag.com/blog/tmux-and-vim">tmux
and vim</a> &gt; ” like many vim users, I edited my .vimrc to simplify
split navigation, so &gt; that I can jump between vim splits using
ctrl-j, ctrl-k, etc.</p>
<p>reddit <a
href="https://www.reddit.com/r/vim/comments/chdl60/python_workflow_with_terminal_using_tmux/">python
workflow with terminal using tmux</a> &gt; “Finally, I have Ctrl+[hjkl]
setup such that I can navigate seamlessly between vim and tmux
panes.”</p>
</div>
</div>
<div id="navigate" class="section level1">
<h1>Navigate</h1>
<div id="explore-files" class="section level2">
<h2>Explore files</h2>
<p>Vim comes with a file explorer:</p>
<pre><code>:Explore
:E</code></pre>
<p>The file explorer can also be opened in tabs or splits:</p>
<pre><code>:Se
:Le
:Ve
:Te</code></pre>
<p>To open a file in vim press enter. To open a file better suited for
other applications, such as a pdf, an html file or an image, press</p>
<pre><code>x</code></pre>
<p>To <a
href="https://stackoverflow.com/questions/27691792/vim-quit-close-netrw-without-selecting-any-file">return
to file editing without opening any file</a> (and to switch back and
forth between editing and explorer):</p>
<pre><code>:Rexplore
:Re</code></pre>
<p>In the file explorer, also called “netrw”, pressing <code>s</code>
changes the way files are sorted by name, time, size. Pressing
<code>x</code> on a file name opens that file with the relevant system
program associated with it. For example pressing <code>x</code> on a pdf
file opens that file in the evince reader on my system. Pressing
<code>x</code> on a folder name opens the files explorer. The
<code>i</code> key switches between different view types, tree view,
detailed view, summarised view. To rename a file press <code>R</code>
and to delete a file press <code>D</code>.</p>
<p>To create a new file in the current directory visible in the
explorer, press:</p>
<pre><code>%</code></pre>
<p>This is also works to create a new directory and file.</p>
<p>To move or rename a file within the explorer:</p>
<pre><code>R</code></pre>
<p>A blog post on <a href="https://shapeshed.com/vim-netrw/">netrw</a>,
vim’s file browser. Explains how to turn the banner off:</p>
<pre><code>let g:netrw_banner = 0</code></pre>
<p>You can put the banner back on by pressing <code>I</code>.</p>
</div>
<div id="go-to-files-or-open-them-in-an-external-viewer"
class="section level2">
<h2>Go to files or open them in an external viewer</h2>
<p>Open the file name or path under the cursor, in the current
window:</p>
<pre><code>gF</code></pre>
<p>Open the file under the cursor, in a new window:</p>
<pre><code>gf</code></pre>
<p>If the file is a pdf, an image or a web link, use:</p>
<pre><code>gx</code></pre>
<p>See :help gx for more information on how vim handles the file opening
in various operating systems.</p>
</div>
<div id="jump-back-and-forth" class="section level2">
<h2>Jump back and forth</h2>
<p>Vim wiki <a
href="https://vim.fandom.com/wiki/Jumping_to_previously_visited_locations">jumping
to previously visited locations</a> &gt; “Like a web browser, you can go
back, then forward:”</p>
<pre><code>Press Ctrl-O to jump back to the previous (older) location.
Press Ctrl-I (same as Tab) to jump forward to the next (newer) location. </code></pre>
</div>
<div id="line-numbers" class="section level2">
<h2>Line numbers</h2>
<div id="display-line-numbers-and-move-to-them" class="section level3">
<h3>Display line numbers and move to them</h3>
<p>Display line numbers</p>
<pre><code>:set nu</code></pre>
<p>Disable line numbers</p>
<pre><code>:set nonu</code></pre>
<p>Enter <code>:line number</code> to jump to a particular line
number.</p>
</div>
<div id="open-a-file-at-a-line-number" class="section level3">
<h3>Open a file at a line number</h3>
<p>Open a file at a particular line number when starting vim</p>
<pre><code>vim +500 file_name.txt</code></pre>
<p>Open a file at a particular line number inside vim</p>
<pre><code>:e +30 python.Rmd</code></pre>
</div>
</div>
<div id="markdown-table-of-content" class="section level2">
<h2>Markdown Table of Content</h2>
<p>Display a list of first level header in a markdown document (found in
quick markdown navigation/TOC)</p>
<pre><code>:g/^# /#</code></pre>
<p>See also :</p>
<ul>
<li>The markdown TOC extension for vim.</li>
<li><a
href="https://github.com/euclio/vim-markdown-composer/blob/master/README.md">Vim
markdown composer</a> a plugin that adds asynchronous Markdown preview
to Neovim and Vim.</li>
</ul>
<div id="vim-markdown-toc-not-used" class="section level3">
<h3>Vim-markdown TOC (not used)</h3>
<p>In <a
href="https://vi.stackexchange.com/questions/24848/how-to-use-vim-markdown-toc-for-documents-with-extension-other-than-md">this
question</a>, I managed to create an auto command to activate
vim-markdown for Rmd files. But now that I start using Nvim-R more
intensively, I hit <a
href="https://github.com/plasticboy/vim-markdown/issues/263">vim-markdown
issue 263</a>: activating vim-markdown removes syntax highlighting and
auto completion of the R code chunks. I first extracted the Toc function
into a small plugin. Then started using the Voom plugin.</p>
</div>
<div id="vim-pandoc-toc-not-used" class="section level3">
<h3>Vim-pandoc TOC (not used)</h3>
<p>The vim-pandoc plugin also provides a table of content for markdown
files, accessible through the <code>:TOC</code> command.</p>
</div>
<div id="voom-toc-used" class="section level3">
<h3>Voom TOC (used)</h3>
<p>I chose to create the table of content with the <a
href="https://github.com/vim-voom/VOoM">Voom plugin</a> based on a
suggestion on <a
href="https://github.com/jalvesaq/Nvim-R/issues/505">Nvim-R issue
505</a>. I have this in my <code>.vimrc</code>:</p>
<pre><code>let voom_ft_modes = {&#39;markdown&#39;: &#39;pandoc&#39;, &#39;rmd&#39;: &#39;pandoc&#39;, &#39;tex&#39;: &#39;latex&#39;}
au BufRead,BufNewFile *.Rmd command! Toc Voom </code></pre>
<p>In the outline pane, press enter once to display the corresponding
header in the body pane. Press enter a second time to move the cursor to
the body pane. In the body pane, press enter once to display the
position of the cursor in the outline pane. Press enter a second time to
move to the corresponding place in the outline pane.</p>
<p>Key mappings in the outline pane:</p>
<pre><code>jk  move up and down in the outline pane. The view pane doesn&#39;t move.
up/down arrow move and display the corresponding sections in the view pane.
&lt;space&gt; fold/unfold the current node.
left/right arrow fold/unfold the current node.
O Recursively expand the current node and its siblings.
C Recursively contract the current node and its siblings.</code></pre>
<p>It’s also possible to move nodes with cut <code>dd</code> and paste
behaviour <code>pp</code> and to promote/demote them as such:</p>
<pre><code>&lt;LocalLeader&gt;l Move node(s) left, that is promote.
&lt;LocalLeader&gt;r Move node(s) right, that is demote.</code></pre>
<blockquote>
<p>By default, commands Cut, Copy, Paste use the “+ register, that is
the system clipboard (|registers|, |quote+|). This means you can move
nodes between outlines in different instances of Vim, or copy/paste in
other applications.</p>
</blockquote>
</div>
</div>
<div id="move-up-down-left-right" class="section level2">
<h2>Move up, down, left, right</h2>
<p>In command mode, the following motions are activated:</p>
<pre><code>:help left-right-motion
j,k move up down
h,l move left right
b,w move previous or next word
ctrl+b, ctrl+d move page up or page down
{number} G go to line number 
H,L,M move to top, bottom and middle of visible window
^, $ move to the begining or end of a line
in addition, I mapped m to $</code></pre>
<p>Note on motion with wrapped lines: <a
href="https://vim.fandom.com/wiki/Move_cursor_by_display_lines_when_wrapping">Move
cursor by display lines when wrapping</a></p>
<div id="go-to-the-matching-curly-brace-or-parenthesis"
class="section level3">
<h3>Go to the matching curly brace or parenthesis</h3>
<p>To go to the matching curly brace or parenthesis</p>
<pre><code>%</code></pre>
</div>
</div>
<div id="quick-fix-window" class="section level2">
<h2>Quick fix window</h2>
<p>Help</p>
<pre><code>:help quickfix</code></pre>
</div>
<div id="redraw" class="section level2">
<h2>Redraw</h2>
<p>Redraw the screen with the cursor line at the top of the window</p>
<pre><code>z&lt;CR&gt; # or
zt</code></pre>
<p>Redraw the screen with the cursor line at the bottom of the
window</p>
<pre><code>z- # or
zb</code></pre>
<p>Redraw, cursor line at centre of window</p>
<pre><code>zz</code></pre>
<p>Can be useful in combination with <a
href="https://stackoverflow.com/questions/10392424/how-can-i-open-vim-with-a-particular-line-number-at-the-top">opening
the files at a particular line number</a>
<code>:e +30 filename.txt</code>.</p>
</div>
<div id="search-in-the-current-file" class="section level2">
<h2>Search in the current file</h2>
<ul>
<li><p>Use <code>"/"</code> to search, then n forward and N
backwards <code>"*"</code> to search for the word under the cursor (you
can also create a mapping to search for a selected text).</p></li>
<li><p>Use <code>:vimgrep /pattern/ %</code> to display search results
in a quick fix window. For example display all lines that start and end
with <code>#</code> in the current file</p>
<pre><code>:vimgrep /#.*#/ %</code></pre></li>
<li><p>Use <code>"?"</code> to search backward. Very useful with text
selection.</p></li>
<li><p>Use <code>:g/pattern</code> to display a list of all search
result in the document.</p></li>
</ul>
<p>Search all occurrences of a pattern and populate the quick fix
window:</p>
<pre><code>:vim /pattern/ % | cw</code></pre>
<ul>
<li>See also the replace section.</li>
</ul>
<div id="search-one-pattern-or-another" class="section level3">
<h3>Search one pattern or another</h3>
<p>Search for opening or closing brackets</p>
<pre><code>/\((\|)\)</code></pre>
</div>
<div id="highlight-search-matches" class="section level3">
<h3>Highlight search matches</h3>
<p>Define a new highlight group and use it to highlight matches</p>
<pre><code>:highlight newgroup ctermbg=green guibg=green
:match newgroup /TODO/</code></pre>
<p>Clear the match pattern</p>
<pre><code>:match</code></pre>
<p>Display the list of all highlight groups</p>
<pre><code>:highlight</code></pre>
<p>Use existing highlight groups</p>
<pre><code>:match String /i/
:2match Character /o/
:3match Label /a/</code></pre>
</div>
</div>
<div id="search-in-multiple-files" class="section level2">
<h2>Search in multiple files</h2>
<p>Define the <code>F3</code> shortcut in <code>.vimrc</code> to
recursively search all files in the present working directory for the
word under the cursor:</p>
<pre><code>nmap &lt;F3&gt; :vimgrep /&lt;C-R&gt;&lt;C-W&gt;/ **&lt;CR&gt;</code></pre>
<p>Alternatively, use git grep from the fugitive plugin:</p>
<pre><code>:Ggrep pattern</code></pre>
<p>Both <code>vimgrep</code> and <code>Ggrep</code> will open a quick
fix window displaying file names and line numbers for each matching
character string.</p>
<p><a
href="https://stackoverflow.com/questions/2653419/vim-open-files-of-the-matches-on-the-lines-given-by-grep">open
files on the match lines given by grep</a></p>
<pre><code>:copen
:grep -r pattern .</code></pre>
<p>or specify specific files extensions</p>
<pre><code>:grep -r pattern *.py</code></pre>
</div>
<div id="working-directory" class="section level2">
<h2>Working directory</h2>
<p>Display the present working directory</p>
<pre><code>:pwd</code></pre>
<p><a
href="http://vim.wikia.com/wiki/Set_working_directory_to_the_current_file">Set
working directory to the current file</a> (for all windows):</p>
<pre><code>:cd %:p:h</code></pre>
<p>Set working directory to the current file, for the current window
only</p>
<pre><code>:lcd %:p:h</code></pre>
<p>In these commands, % gives the name of the current file, %:p gives
its full path, and %:p:h gives its directory (the “head” of the full
path).</p>
<p>Automatically change the working directory to the file currently
edited</p>
<pre><code>set autochdir</code></pre>
<p>autochdir conflicts with the ctags plugin taglist <a
href="https://vi.stackexchange.com/questions/13960/how-to-browse-tags-when-autochdir-is-set">as
explained here</a> so I deactivated it.</p>
</div>
</div>
<div id="neovim" class="section level1">
<h1>NeoVim</h1>
<ul>
<li><p>Neo Vim for Vim users <a
href="https://neovim.io/doc/user/nvim.html#nvim-from-vim"
class="uri">https://neovim.io/doc/user/nvim.html#nvim-from-vim</a>
explains how to use the .vimrc from Neovim</p></li>
<li><p><a href="https://nvchad.com/" class="uri">https://nvchad.com/</a>
Neovim config</p></li>
</ul>
<div id="llm-code-completion-in-neovim" class="section level2">
<h2>LLM code completion in NeoVim</h2>
<p>See also the bookmark two sections on LLM code completion and coding
assistant.</p>
<p>List of neovim code completion tools with Github stars as of February
2025</p>
<ul>
<li><p>avante.nvim <a
href="https://github.com/yetone/avante.nvim?tab=readme-ov-file#installation"
class="uri">https://github.com/yetone/avante.nvim?tab=readme-ov-file#installation</a>
9900 stars</p></li>
<li><p>codecompanion.nvim <a
href="https://github.com/olimorris/codecompanion.nvim"
class="uri">https://github.com/olimorris/codecompanion.nvim</a> 2300
stars</p></li>
<li><p>minuet.ai <a
href="https://github.com/milanglacier/minuet-ai.nvim?tab=readme-ov-file#minuet-ai"
class="uri">https://github.com/milanglacier/minuet-ai.nvim?tab=readme-ov-file#minuet-ai</a>
307 stars</p></li>
<li><p>LLM.nvim <a href="https://github.com/Kurama622/llm.nvim"
class="uri">https://github.com/Kurama622/llm.nvim</a> 187 stars</p>
<ul>
<li>The code completion part is apparently a 95% copy of minuet.ai
according to <a
href="https://www.reddit.com/r/neovim/comments/1idfbir/comment/m9z6tz8/?utm_source=share&amp;utm_medium=web3x&amp;utm_name=web3xcss&amp;utm_term=1&amp;utm_content=share_button"
class="uri">https://www.reddit.com/r/neovim/comments/1idfbir/comment/m9z6tz8/?utm_source=share&amp;utm_medium=web3x&amp;utm_name=web3xcss&amp;utm_term=1&amp;utm_content=share_button</a></li>
</ul></li>
<li><p>Neovim plugins for the Perplexity API suggested by Perplexity <a
href="https://www.perplexity.ai/search/i-am-a-environmental-macroecon-.Na30HtfQdCzocg6SPkenw#2"
class="uri">https://www.perplexity.ai/search/i-am-a-environmental-macroecon-.Na30HtfQdCzocg6SPkenw#2</a></p>
<ul>
<li><p><a href="https://github.com/frankroeder/parrot.nvim"
class="uri">https://github.com/frankroeder/parrot.nvim</a> Lightweight
chat-like plugin</p></li>
<li><p><a href="https://github.com/Robitx/gp.nvim"
class="uri">https://github.com/Robitx/gp.nvim</a></p></li>
<li><p>Avante can also use the perplexity API.</p></li>
</ul></li>
</ul>
</div>
<div id="share-config-between-vim-and-nvim" class="section level2">
<h2>Share config between vim and nvim</h2>
<ul>
<li><a href="https://neovim.io/doc/user/nvim.html#nvim-from-vim"
class="uri">https://neovim.io/doc/user/nvim.html#nvim-from-vim</a></li>
</ul>
<blockquote>
<p>“Create your init.vim (user config) file”</p>
</blockquote>
<pre><code>:exe &#39;edit &#39;.stdpath(&#39;config&#39;).&#39;/init.vim&#39;
:write ++p</code></pre>
<blockquote>
<p>“Add these contents to the file”</p>
</blockquote>
<pre><code>set runtimepath^=~/.vim runtimepath+=~/.vim/after
let &amp;packpath = &amp;runtimepath
source ~/.vimrc</code></pre>
</div>
</div>
<div id="plugins" class="section level1">
<h1>Plugins</h1>
<p>Plugins are mentioned in diverse section of this document. This
section is mostly to list plugins I used and potentially interesting
plugins.</p>
<p>Display plugins I currently use with vundle:</p>
<pre><code>:PluginList</code></pre>
<p>Copy of the list from my <code>.vimrc</code>:</p>
<pre><code>&quot; Colour themes for Vim
Plugin &#39;morhetz/gruvbox&#39;
Plugin &#39;nanotech/jellybeans.vim&#39;
&quot; Code structure i.e. table of content of classes, methods and functions
Plugin &#39;yegappan/taglist&#39;
&quot; Git interface 
Plugin &#39;tpope/vim-fugitive&#39;
&quot; Latex editing
Plugin &#39;vim-latex/vim-latex&#39;
&quot; Markdown toc navigation
Plugin &#39;godlygeek/tabular&#39;
Plugin &#39;plasticboy/vim-markdown&#39;
&quot; Python autocompletion 
Plugin &#39;davidhalter/jedi-vim&#39;
&quot; Python linter
Plugin &#39;dense-analysis/ale&#39; 
&quot; R programming
Plugin &#39;jalvesaq/Nvim-R&#39;</code></pre>
<p>I also use a spell checker.</p>
<p>Other plugins installed in the default vim repo:</p>
<pre><code>:r ! ls ~/.vim/pack/plugins/start/
indentpython.vim
pytest.vim
vim-slime
vim-tmux-navigator</code></pre>
<p>Potentially useful plugins</p>
<ul>
<li><a href="https://github.com/tpope/vim-fugitive">fugitive</a> git
integration</li>
<li><a href="https://github.com/bfrg/vim-qf-preview">Quick fix
preview</a></li>
<li>Fuzzy search</li>
<li>fzf command line fuzzy finder <a
href="https://github.com/junegunn/fzf">fzf</a></li>
<li>File explorer
<ul>
<li>or simply use the native vim explorer <code>:Explore</code></li>
</ul></li>
<li>Minibufexplorer and SO post on <a
href="https://stackoverflow.com/questions/4865132/an-alternative-to-minibufexplorer-vim">alternatives
to minibufexplorer</a></li>
<li><a href="https://github.com/lervag/vimtex#alternatives">Vimtex</a>
vim plugin for editing LaTeX files.</li>
<li><a href="https://vim.spf13.com/">distribution spf13</a> probably not
recommended but the home page contains a list of interesting
plugins.</li>
<li>See also the section programming with vim below for language
specific plugins.</li>
</ul>
<div id="create-a-plugin" class="section level2">
<h2>Create a plugin</h2>
<ul>
<li><a
href="https://learnvimscriptthehardway.stevelosh.com/chapters/42.html">plugin
layout in the dark ages</a> explains how to create file type
plugins.</li>
</ul>
<p>I’m trying to extract a table of content functionality from a plugin
that does many other things I don’t need.</p>
<ul>
<li><a
href="https://vi.stackexchange.com/questions/16470/setting-syntax-in-ftplugin"
class="uri">https://vi.stackexchange.com/questions/16470/setting-syntax-in-ftplugin</a></li>
</ul>
<p>I extracted the function into a plugin called <a
href="https://github.com/paulrougieux/markdown-toc-toc">markdown-toc-toc</a>
I placed the plugin in ~/.vim/pack/plugins/start/markdown-toc-toc and
this fixes my issue. I now have both Nvim-R autocompletion and syntax
highlight working correctly in R markdown chunks as well as a table of
content for the markdown titles. Later on, I moved to the Voom plugin
for the table of content.</p>
</div>
<div id="deactivate-a-plugin" class="section level2">
<h2>Deactivate a plugin</h2>
<p>To temporarily deactivate a plugin in a session.</p>
</div>
<div id="detect-slow-plugins" class="section level2">
<h2>Detect slow plugins</h2>
<p><a
href="https://stackoverflow.com/questions/12213597/how-to-see-which-plugins-are-making-vim-slow">How
to see which plugins are making Vim slow?</a></p>
<blockquote>
<p>“You can use built-in profiling support: after launching vim do”</p>
</blockquote>
<pre><code>:profile start profile.log
:profile func *
:profile file *
&quot; At this point do slow actions
:profile pause
:noautocmd qall!</code></pre>
<blockquote>
<p>“If you’re having problems with screen update operations (^L,
scrolling, etc) being slow, your problem may be an inefficient syntax
highlighting file. You can test this by temporarily disabling syntax
highlighting”</p>
</blockquote>
<pre><code>:syn off</code></pre>
<p>To profile the syntax file</p>
<pre><code>Open a file that causes syntax highlighting performance issues.
Run :syntime on to start profiling.
Scroll through the file a bit.
Run :syntime report to generate a report. The patterns listed first in the report are the ones which took the most time to process.</code></pre>
<p>The matchparen plugin seemed to be slow on large markdown documents.
It’s part of the vim distribution and loaded by default.
vi.stackexchange <a
href="https://vi.stackexchange.com/questions/5128/matchpairs-makes-vim-slow">matchpairs
makes vim slow</a>. But it was called by the Pandoc syntax highlight
file.</p>
</div>
<div id="install-plugins-with-vims-built-in-plugin-support"
class="section level2">
<h2>Install plugins with vim’s built-in plugin support</h2>
<p>Install slime with Vim’s built-in package support (since Vim
7.4.1528):</p>
<pre><code> mkdir -p ~/.vim/pack/plugins/start
 cd ~/.vim/pack/plugins/start
 git clone https://github.com/jpalardy/vim-slime.git</code></pre>
</div>
<div id="install-plugins-with-vundle" class="section level2">
<h2>Install plugins with Vundle</h2>
<p>Install all plugins configured in your <code>.vimrc</code>.</p>
<pre><code>:PluginInstall</code></pre>
<p>Update the configured plugins. Press ‘u’ after updates to see the
change log.</p>
<pre><code>:PluginInstall!   &quot; NOTE: bang(!)
# or
:PluginUpdate</code></pre>
<p>Since there is a built-in plugin support, maybe I don’t need Vundle
after all?</p>
<div id="tell-vundle-to-manage-plugins-in-your-.vimrc"
class="section level3">
<h3>Tell Vundle to manage plugins in your .vimrc</h3>
<p>Edit your .vimrc and add the following at the beginning</p>
<pre><code>set nocompatible              &quot; be iMproved, required
filetype off                  &quot; required

&quot; set the runtime path to include Vundle and initialize
set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()
&quot; alternatively, pass a path where Vundle should install plugins
&quot;call vundle#begin(&#39;~/some/path/here&#39;)

&quot; let Vundle manage Vundle, required
Plugin &#39;VundleVim/Vundle.vim&#39;
&quot; Navigate markdown toc
Plugin &#39;godlygeek/tabular&#39;
Plugin &#39;plasticboy/vim-markdown&#39;
Plugin &#39;tpope/vim-fugitive&#39;
Plugin &#39;jpalardy/vim-slime&#39;

&quot; All of your Plugins must be added before the following line
call vundle#end()            &quot; required
filetype plugin indent on    &quot; required
&quot; To ignore plugin indent changes, instead use:
&quot;filetype plugin on
&quot;
&quot; Brief help
&quot; :PluginList       - lists configured plugins
&quot; :PluginInstall    - installs plugins; append `!` to update or just :PluginUpdate
&quot; :PluginSearch foo - searches for foo; append `!` to refresh local cache
&quot; :PluginClean      - confirms removal of unused plugins; append `!` to auto-approve removal
&quot;
&quot; see :h vundle for more details or wiki for FAQ
&quot; Put your non-Plugin stuff after this line</code></pre>
</div>
</div>
</div>
<div id="programming" class="section level1">
<h1>Programming</h1>
<div id="latex-editing" class="section level2">
<h2>Latex editing</h2>
<div id="vim-latex" class="section level3">
<h3>vim Latex</h3>
<p><a href="https://github.com/vim-latex/vim-latex">vim-latex</a> the
one I used first.</p>
<ul>
<li>Was complaining about my makefile, that it didn’t include a dvi
section</li>
<li>Was creating nice taglist but with duplicated tags.</li>
</ul>
</div>
<div id="vimtex" class="section level3">
<h3>Vimtex</h3>
<p><a href="https://github.com/lervag/vimtex#alternatives">vimtex</a> is
more recent compared to vim-latex</p>
<ul>
<li>Completion uses omni completion, see <code>:help compl-omni</code>
with CTRL-X CTRL-O</li>
<li>doesn’t complain about my minimalistic makefile</li>
<li>doesn’t add anything to the taglist (maybe I should use gutentag?)
but there is a table of content buffer.</li>
</ul>
<p>Usage as explained in
̀<code>:help vimtex-default-mappings</code>:</p>
<p>———————————————————————~ LHS RHS MODE~ ———————————————————————~
<localleader>lv |<plug>(vimtex-view)| <code>n</code> <localleader>lr
|<plug>(vimtex-reverse-search)| <code>n</code> <localleader>ll
|<plug>(vimtex-compile)| <code>n</code> ———————————————————————~</p>
<p>I mapped <code>&lt;localleader&gt;</code> to <code>;</code>.</p>
<p>Display a table of content:</p>
<pre><code>:VimtexTocOpen
:VimtexTocToggle</code></pre>
<p>Define a shorter command name <code>Toc</code>, by placing this in
the .vimrc</p>
<pre><code>au BufRead,BufNewFile *.tex command! Toc VimtexTocOpen</code></pre>
<p>I first ran into this error when viewing git diffs or when jumping
back to the tex file with Ctrl-O</p>
<pre><code>Error detected while processing BufRead Autocommands for &quot;*.tex&quot;:
E174: Command already exists: add ! to replace it: Toc VimtexTocOpen</code></pre>
<p>Because I had the autocommand defined this way:</p>
<pre><code>au BufRead,BufNewFile *.tex command Toc VimtexTocOpen</code></pre>
<p>Compile</p>
<pre><code>:VimtexCompile</code></pre>
<p>Install prerequisite to view pdf files with forward (from vim to the
pdf viewer) and backward (from the pdf viewer to vim) search. Note:
Forward and backward search are not available for evince <a
href="https://github.com/lervag/vimtex/issues/179">issue 179</a>.</p>
<pre><code>sudo apt install zathura
sudo apt install xdotool</code></pre>
<p>This bug report pushed me to learn about xdotool and xprop.</p>
<p>There was a issue with the focus not moving to the zathura viewer. I
reported it as <a
href="https://github.com/lervag/vimtex/issues/1719">issue #1719</a>. The
first step was to add client server support to vim. I asked a question
on <a
href="https://vi.stackexchange.com/questions/26025/how-to-install-vim-with-clientserver-on-debian">how
to install vim with clientserver support</a>. But the issue remained
even with client server enabled in vim.</p>
<p>The second step was related to the fact that Debian 10 Buster uses
wayland as a window manager. To force the use of x11 for zathura, in
debian a zathura wrapper script containing:</p>
<pre><code>#!/usr/bin/bash
GDK_BACKEND=x11 /usr/bin/zathura &quot;$@&quot;</code></pre>
<p>Can be placed under the default user bin located at ~/.local/bin.
This is one of the first element of the <code>$PATH</code> environment
variable.</p>
</div>
</div>
<div id="python-programming" class="section level2">
<h2>Python programming</h2>
<p>Plugins * <a href="https://github.com/python-mode/python-mode">Python
mode</a> * <a href="https://github.com/python-mode/python-mode">Jedi</a>
it’s incompatible with python mode (according to the readme) * more
explanations in the Jedi section below * <a
href="https://github.com/ivanov/vim-ipython">vim ipython</a> *
[vim-test] see also the tests section below.</p>
<p>Blog posts</p>
<ul>
<li>wiki.python.org <a href="https://wiki.python.org/moin/Vim">vim</a>
mentions:
<ul>
<li><a href="https://200ok.ch/posts/vim-as-python-ide.html">vim as a
python IDE</a></li>
</ul></li>
<li>realpython.com <a
href="https://realpython.com/vim-and-python-a-match-made-in-heaven/">Vim
and python a match made in heaven</a></li>
<li>reddit <a
href="https://www.reddit.com/r/Python/comments/5f2fri/developing_python_with_vim_what_plugin_to_choose/">python-mode
or Jedi?</a> python mode seems to be for starting, most people turn the
features off.</li>
<li>SO <a
href="https://stackoverflow.com/questions/18948491/running-python-code-in-vim">Running
python code in VIM</a> Make sure your files start with a shebang.</li>
<li>Plug-in <a href="https://github.com/jupyter-vim/jupyter-vim">Jupyter
vim</a></li>
<li>Vim on Python wiki (set softtabstop=4) or your python development
environment (set tabstop=4 and set softtabstop=4)</li>
<li>full stack python <a
href="https://www.fullstackpython.com/vim.html">vim</a></li>
<li><a
href="https://stackoverflow.com/questions/1901528/vim-and-python-scripts-debugging">vim
and python script debugging</a></li>
</ul>
<p>Reddit <a
href="https://www.reddit.com/r/vim/comments/chdl60/python_workflow_with_terminal_using_tmux/">python
workflow with terminal using tmux</a></p>
<blockquote>
<p>“I run my scripts using</p>
<p>ipython -i script.py</p>
<p>That way I drop to an ipython shell whenever it breaks or finishes
running. I also insert</p>
<p>from ipython import embed; embed();</p>
<p>Instead of using pdb. Its really neat.”</p>
</blockquote>
<div id="ale-linter" class="section level3">
<h3>Ale Linter</h3>
<p>I use the <a href="https://github.com/dense-analysis/ale">ALE
linter</a> to check the quality of python code.</p>
<p>To copy code it’s preferable to deactivate the 2 characters columns
used by ale as explained in <a
href="https://vi.stackexchange.com/questions/21563/is-it-possible-to-disable-the-column-on-the-left-that-is-created-by-ale">Is
it possible to disable the column on the left that is created by
ALE?</a></p>
<pre><code>:set signcolumn=no</code></pre>
<p>The 2 characters column can later be shown again with</p>
<pre><code>:set signcolumn=yes</code></pre>
<p>To temporarily disable ALE in a buffer:</p>
<pre><code>:let b:ale_enabled = 0</code></pre>
<p>To enable it:</p>
<pre><code>:let b:ale_enabled = 1</code></pre>
<p>For the python options, see:</p>
<pre><code>:h ale-python-options</code></pre>
<p>I’ve added this option to my .vimrc to show which linter is
complaining</p>
<pre><code>let g:ale_echo_msg_format = &#39;[%linter%] %s&#39;</code></pre>
<p>The linters I see most in python code are pylint and flake8.</p>
<p>Pylint complains about <a
href="https://github.com/PyCQA/pylint/issues/2018">variable names that
are too short</a></p>
<p>See the <a href="python.html">python page</a> for the configuration
details of the linters.</p>
<p>Turn off virtual text (added to .vimrc)</p>
<pre><code>let g:ale_virtualtext_cursor = 0</code></pre>
<div id="flake-8" class="section level4">
<h4>Flake 8</h4>
<p>Example exception file <code>.flake8</code> at the root of the git
repository</p>
<pre><code>[flake8]
ignore = F841, E501, W503, E203</code></pre>
</div>
</div>
<div id="jedi-vim" class="section level3">
<h3>Jedi vim</h3>
<ul>
<li><a href="https://github.com/davidhalter/jedi">Jedi</a>
autocompletion, also used by ipython.</li>
<li><a
href="https://github.com/davidhalter/jedi-vim/blob/master/doc/jedi-vim.txt">Jedi
vim documentation</a></li>
</ul>
<p>Jedi Installation required enabling python mode in vim, available
inside this Debian package:</p>
<pre><code>sudo apt install vim-nox</code></pre>
<p>Autocomplete is turned on to complete a word, press:</p>
<pre><code>Ctrl+Space</code></pre>
<p>To cycle through proposition you can use <code>Ctrl+space</code>
again or:</p>
<pre><code>Ctrl+P
Ctrl+N</code></pre>
<p>Enter for example a module name, then use Ctrl+N and Ctrl+P to choose
among the objects and functions in that module.</p>
<p>Show the help of a function or object:</p>
<pre><code>K</code></pre>
<p>Jump to definition:</p>
<pre><code>&lt;leader&gt;d</code></pre>
<p>I remapped the <code>&lt;leader&gt;</code> key to <code>,</code> in
my .vimrc</p>
<pre><code>:let mapleader = &quot;,&quot;</code></pre>
<p>See above section on navigation, you can use <code>Ctrl-O</code> to
jump back and <code>Ctrl-I</code> to jump forward.</p>
<div id="refactor-with-jedirename" class="section level4">
<h4>Refactor with <code>jedi#rename()</code></h4>
<p>To refactor all occurrences of a variable in a file, move to the
object you want to rename, then</p>
<pre><code>:call jedi#rename()</code></pre>
<p>There is a default shortcut <code>&lt;leader&gt;r</code> for this but
it is deactivated on my machine for some reason. Not a big problem since
I don’t use refactor often. Also I prefer not to call this shortcut by
mistake.</p>
<p>The advantage of <code>jedi#rename()</code> over a simple
<code>:%s/old/new/g</code> is that it will only replace python objects,
if you have them mentioned in comments, it will not replace those.</p>
<p>See also my refactor with <code>git grep</code> and <code>perl</code>
in the bash page.</p>
</div>
</div>
<div id="open-files-from-traceback-error-messages"
class="section level3">
<h3>Open files from traceback error messages</h3>
<p>The goal is to open files at the line number specified in a python
error trace back message.</p>
<ul>
<li>Tim Pope <a href="https://github.com/tpope/vim-dispatch">Vim
Dispatch</a></li>
</ul>
<p>Using Vim Dispatch to run pylint on the current script works
correctly and returns a quick fix window with errors on the relevant
lines:</p>
<pre><code>:Dispatch pylint -f parseable %</code></pre>
<p>Running the current script itself with ipython</p>
<pre><code>:Dispatch ipython %
:Dispatch ipython3 ~/repos/eu_cbm/eu_cbm_hat/scripts/running/run_zz.py</code></pre>
<p>Opens a small tmux pane at the bottom of the tmux window and starts
the script. Upon completion, the output is available in a quickfix
window. One issue is that the files cannot be opened with
<code>gF</code>. File names in the quickfix window output are not
parseable to jump to them. I get error messages of this form in the
quick fix window:</p>
<pre><code>    || hat/ZZ/0 - INFO - Saving final simulations results to disk.
|| ^[[0;31m---------------------------------------------------------------------------^[[0m
|| ^[[0;31mAttributeError^[[0m                            Traceback (most recent call last)
|| ^[[0;32m~/repos/eu_cbm/eu_cbm_hat/scripts/running/run_zz.py^[[0m in ^[[0;36m&lt;module&gt;^[[0;34m^[[0m
|| ^[[1;32m     20^[[0m ^[[0;31m# runner.country.base_year = 2020^[[0m^[[0;34m^[[0m^[[0;34m^[[0m^[[0;34m^[[0m^[[0m</code></pre>
<p>Running it with python3 is better because I can actually open the
file with <code>gF</code>, however still not at the correct line
number</p>
<pre><code>:Dispatch python3  %</code></pre>
<p><a href="https://github.com/tpope/vim-dispatch/issues/299">Issue
299</a> with recommended settings</p>
<pre><code>autocmd FileType python let b:dispatch = &#39;pylint -f parseable %&#39;</code></pre>
<p>Still doesn’t work for me, TODO: make a reproducible example and post
on Vi stackexchange.</p>
<p>Other links</p>
<ul>
<li><p>Stackexchange <a
href="https://vi.stackexchange.com/questions/5110/quickfix-support-for-python-tracebacks">Quick
Fix support for python tracebacks</a></p></li>
<li><p>Reddit <a
href="https://www.reddit.com/r/vim/comments/60lics/view_python_traceback_as_quickfix/">View
Python traceback as quickfix</a></p>
<ul>
<li>Recommends TPope’s <a
href="https://github.com/tpope/vim-dispatch">Vim-Dispatch</a>
package</li>
</ul></li>
</ul>
</div>
</div>
<div id="r-programming" class="section level2">
<h2>R programming</h2>
<ul>
<li>Medium Xiaoou WANG <a
href="https://medium.com/@xiaoouwang/how-to-turn-vim-into-a-perfect-better-r-ide-and-rmarkdown-writer-than-rstudio-part-i-48e1293c9c05">How
to turn vim into a perfect, better R IDE and Rmarkdown writer than
Rstudio (part I)</a></li>
<li>reddit <a
href="https://www.reddit.com/r/vim/comments/92x9u8/r_programmers_do_you_prefer_vim_to_rstudio/">R
programmers, do you prefer vim or Rstudio?</a> &gt; “Vim with fzf helps
open these subsection code files super easily, ag helps &gt; me find
keywords across all the files in my code folder, ctags helps me find
&gt; functions I’ve defined, ale tells where I’ve made some trivial
mistake, &gt; gitgutter tells me where I’ve made changes I’d maybe like
to revisit later. I &gt; find these plugins alone make coding in vim
much easier than R studio and &gt; they aren’t even R specific.”</li>
<li>free code camp <a
href="https://www.freecodecamp.org/news/turning-vim-into-an-r-ide-cd9602e8c217/">Turning
vim into an IDE</a> Uses <a
href="https://github.com/jalvesaq/Nvim-R">Nvim-R</a> which works with
both vim and neo vim</li>
</ul>
<div id="nvim-r" class="section level3">
<h3>Nvim-R</h3>
<p><a href="https://github.com/jalvesaq/Nvim-R">Nvim-R</a> supports
knitr and mappings can be defined for example:</p>
<p>RSendChunk RDSendChunk</p>
<p>I mapped the local leader key to “;” by adding the following to my
.vimrc:</p>
<pre><code>let maplocalleader = &quot;;&quot;</code></pre>
<p>Start R</p>
<ul>
<li>Start R (default) ;rf</li>
</ul>
<p>Sending code to R:</p>
<ul>
<li>Chunk (cur, echo and down) ;ca</li>
<li>Chunk (cur) ;cc</li>
<li>Chunk (cur, echo) ;ce</li>
<li>Chunk (cur, down) ;cd</li>
<li>Chunk (from first to here) ;ch</li>
<li>Line ;l</li>
<li>Line (and down) ;d</li>
<li>Line (and write output as a comment) ;o</li>
<li>Selection ;ss</li>
<li>Selection (echo) ;se</li>
<li>Selection (evaluate and insert output in new tab) ;so</li>
<li>File ;aa</li>
<li>File (echo) ;ae</li>
<li>File (open .Rout) ;ao</li>
</ul>
<p>Object browser</p>
<ul>
<li>Open/Close the object browser ;ro</li>
<li>Expand (all lists) ;r=</li>
<li>Collapse (all lists) ;r-</li>
<li>Toggle (cur) Enter</li>
</ul>
<p>On the code, when the cursor is on a data frame:</p>
<ul>
<li>Names (cur) ;rn</li>
<li>Structure (cur) ;rt</li>
<li>View data.frame (cur) in new tab ;rv</li>
<li>View data.frame (cur) in horizontal split ;vs</li>
<li>View data.frame (cur) in vertical split ;vv</li>
<li>Selection (evaluate and insert output in new tab) ;so</li>
</ul>
<p>Edit code</p>
<ul>
<li>Toggle comment (line, sel) ;xx</li>
</ul>
<p>Help on a function ;rh</p>
</div>
<div id="tags" class="section level3">
<h3>Tags</h3>
<p>To generate tags for R files contained in a project’s <code>R/</code>
subfolder, define the following bash function:</p>
<pre class="bash"><code>rtags() {
    Rscript -e &quot;rtags(ofile = &#39;et&#39;); nvimcom::etags2ctags(&#39;et&#39;, &#39;tags&#39;); unlink(&#39;et&#39;)&quot;  &amp;&amp; cat tags
}</code></pre>
<p>Usage:</p>
<pre><code>cd ~/rp/eutradeflows/R  &amp;&amp; rtags</code></pre>
<p>The bash function above was inspired by NVimR’s
<code>:RBuildTags</code> command. Alternatively, you can call the line
starting with <code>rtags</code> above from within Vim with
<code>:RBuildTags</code>. But this requires moving to the
<code>/R</code> subfolder first and moving back to the project root
after having created the tags:</p>
<pre><code>R &gt; setwd(&quot;R&quot;) # R command

:RBuildTags # VIM command

R &gt; setwd(&quot;..&quot;) # R command</code></pre>
<p>Display tag files currently seen by vim:</p>
<pre><code>:set tags</code></pre>
<p>Navigate tag files with <code>CTRL+]</code> (<code>CTRL+ù</code> on
my setup).</p>
<p><a href="https://stackoverflow.com/a/14465438/2641825"
class="uri">https://stackoverflow.com/a/14465438/2641825</a></p>
<p>An NVim-R issue about displaying a nice <a
href="https://github.com/jalvesaq/Nvim-R/issues/517">list of tags for R
functions</a>.</p>
<p>I have added some of my packages to the tag files always seen by
vim:</p>
<pre><code>autocmd FileType r set tags+=~/rp/tradeharvester/R/tags,~/rp/eutradeflows/R/tags
autocmd FileType rmd set tags+=~/rp/tradeharvester/R/tags,~/rp/eutradeflows/R/tags</code></pre>
<p>Setting up tags as explained in :help Nvim-R</p>
<blockquote>
<p>You could, for example, download and unpack R’s source code, start R
inside the ~/.cache/Nvim-R directory and do the following commands:</p>
</blockquote>
<pre><code> rtags(path = &quot;/path/to/R/source/code&quot;, recursive = TRUE, ofile = &quot;RTAGS&quot;)
 etags2ctags(&quot;RTAGS&quot;, &quot;Rtags&quot;)</code></pre>
<blockquote>
<p>Then, you would quit R and do the following command in the terminal
emulator:</p>
</blockquote>
<pre><code> ctags --languages=C,Fortran,Java,Tcl -R -f RsrcTags /path/to/R/source/code</code></pre>
<blockquote>
<p>Finally, you would put the following in your |vimrc|, optionally
inside an |autocmd-group|:</p>
</blockquote>
<pre><code> autocmd FileType r set tags+=~/.cache/Nvim-R/Rtags,~/.cache/Nvim-R/RsrcTags
 autocmd FileType rnoweb set tags+=~/.cache/Nvim-R/Rtags,~/.cache/Nvim-R/RsrcTags</code></pre>
<p>Config example <a
href="https://gist.github.com/tgirke/7a7c197b443243937f68c422e5471899"
class="uri">https://gist.github.com/tgirke/7a7c197b443243937f68c422e5471899</a></p>
</div>
<div id="knitr-issue" class="section level3">
<h3>Knitr issue</h3>
<p>Posted this to <a
href="https://github.com/jalvesaq/Nvim-R/issues/509"
class="uri">https://github.com/jalvesaq/Nvim-R/issues/509</a></p>
<p>One solution based on <code>:help Nvim-R-key-bindings</code>, is to
use <code>SendCmdToR</code> as such:</p>
<pre><code>:call g:SendCmdToR(&quot;setwd(opts_knit$get()$root.dir)&quot;)</code></pre>
<p>I mapped this to <code>&lt;localleader&gt;wd</code> by editing my
<code>.vimrc</code> as follows:</p>
<pre><code>map &lt;silent&gt; &lt;LocalLeader&gt;wd  :call g:SendCmdToR(&quot;setwd(opts_knit$get()$root.dir)&quot;)&lt;CR&gt;</code></pre>
<p>To use it, I run the setup chunk with
<code>&lt;localleader&gt;ca</code>, then I call
<code>&lt;localleader&gt;wd</code>.</p>
</div>
</div>
<div id="debugger" class="section level2">
<h2>Debugger</h2>
<p>vi.stackexchange <a
href="https://vi.stackexchange.com/questions/17962/python-debugging">Python
debugging</a> <a href="https://github.com/gotcha/vimpdb">vimpdb</a></p>
</div>
<div id="git-fugitive" class="section level2">
<h2>Git fugitive</h2>
<p>Once the fugitive plugin is installed the <code>:G</code> command can
be used run any git command, such as:</p>
<pre><code>:G status
:G pull 
:G log</code></pre>
<p>The output of these command may appear in a vim buffer, or it may
appear in a terminal, depending on whether or not fugitive has a special
way to handle the output of git.</p>
<div id="g-summary-buffer-similar-to-git-status" class="section level3">
<h3>:G Summary buffer similar to git status</h3>
<p>You can also call the command alone to open a fugitive summary
buffer:</p>
<pre><code>:G</code></pre>
<p>Within this summary buffer many things can be done with mappings.
Move to the next file and expand inline diffs:</p>
<pre><code>i</code></pre>
<p>Expand inline diffs of the file under the cursor :</p>
<pre><code>&gt;</code></pre>
<p>Remove the inline diff of the file under the cursor.</p>
<pre><code>&lt;</code></pre>
<p>Perform a horizontal diff on the file under the cursor.</p>
<pre><code>dd</code></pre>
<p>Perform a vertical diff on the file under the cursor.</p>
<pre><code>dv</code></pre>
<p>Stage (add) or unstage (reset) the file under the cursor:</p>
<pre><code>a
-</code></pre>
<p>Create a commit</p>
<pre><code>cc</code></pre>
<p>Discard the change under the cursor. This uses <code>checkout</code>
or <code>clean</code> under the hood. A command is echoed that shows how
to undo the change. Consult <code>:messages</code> to see it again. You
can use this during a merge conflict do discard “our” changes (–theirs)
in the “Unstaged” section or discard “their” changes (–ours) in the
“Staged” section.</p>
<pre><code>X</code></pre>
<div id="x-discard-changes" class="section level4">
<h4>X discard changes</h4>
<p>The powerful X command led me to loose a bunch of changes. A help
hint in the message bar says to use the following to recover one
file</p>
<pre><code>:Gsplit art/music.md|Gread 124cdf331a4</code></pre>
<p>I managed to recover that test files. How do I find out about the
other files deleted previously?</p>
</div>
<div id="cc-commit" class="section level4">
<h4>cc commit</h4>
<p>When committing markdown file I like to get a summary of the modified
titles as the long part of the commit message. Search pattern to look
for modified titles of level 2 and more in the diff part of the fugitive
git summary buffer accessible after pressing <code>i</code> on a file
name:</p>
<pre><code>:g/+##</code></pre>
</div>
</div>
<div id="git-commands-within-vim" class="section level3">
<h3>Git commands within vim</h3>
<p>Blame the current file in a left side split</p>
<pre><code>:G blame</code></pre>
<p>Git log of the current file only</p>
<pre><code>:G log %</code></pre>
<p>Since the word diff provided by fugitive is not colourized, I created
an alias to display a word diff</p>
<pre><code>:Gwdiff</code></pre>
<p>It’s defined in .vimrc as:</p>
<pre><code>command! Gwdiff vert term git diff --word-diff</code></pre>
</div>
</div>
<div id="navigate-code-with-tags" class="section level2">
<h2>Navigate code with tags</h2>
<div id="universal-ctags" class="section level3">
<h3>Universal Ctags</h3>
<p>Install <a href="https://github.com/universal-ctags/ctags">universal
ctags</a>. This is an updated version exuberant ctags (not updated since
2009):</p>
<pre><code>sudo apt install universal-ctags</code></pre>
<p>Define tags in a python repository</p>
<pre><code>ctags -R</code></pre>
<ul>
<li><p>I have defined shortcuts for the French AZERTY keyboard. I use
<code>ctrl %</code> to jump to a tag, because it’s besides the letter M,
accessible with the little finger.</p></li>
<li><p>Help page on tags for NvimR
<code>:help RBuildTags</code></p></li>
<li><p>Reddit <a
href="https://www.reddit.com/r/vim/comments/s0j8v/what_plugin_is_used_on_the_topright_of_this/">comparison
of taglist and tagbar</a></p></li>
</ul>
</div>
<div id="taglist" class="section level3">
<h3>Taglist</h3>
<p>Install the taglist plugin with vundle</p>
<pre><code>Plugin &#39;yegappan/taglist&#39;</code></pre>
<ul>
<li><p><a
href="http://vim-taglist.sourceforge.net/manual.html#taglist-internet">taglist
manual</a></p>
<blockquote>
<p>“You can open the taglist window using the”:TlistOpen” or the
“:TlistToggle” commands. The “:TlistOpen” command opens the taglist
window and jumps to it. The “:TlistToggle” command opens or closes
(toggle) the taglist window and the cursor remains in the current
window.”</p>
</blockquote></li>
</ul>
<p>Help:</p>
<pre><code>:help taglist-intro</code></pre>
</div>
<div id="tagbar" class="section level3">
<h3>Tagbar</h3>
<p>I don’t use it because it opens only one file in the list, see
feature request <a
href="https://github.com/majutsushi/tagbar/issues/31">open multiple
files like taglist 31</a></p>
<p>An alternative plugin called <a
href="https://github.com/majutsushi/tagbar">tagbar</a> enables</p>
<pre><code>https://github.com/majutsushi/tagbar</code></pre>
<p><a href="">latex related issues</a> <a
href="https://github.com/majutsushi/tagbar/issues/336">Issue 336 too
much space</a> Recommends:</p>
<pre><code>let g:tagbar_compact = 1</code></pre>
<p>Here are the settings I used when I tried tagbar:</p>
<pre><code>&quot; Settings for plugin &#39;majutsushi/tagbar&#39;
&quot; Toggle tagbar
nmap &lt;F8&gt; :TagbarToggle&lt;CR&gt;
&quot; Place tagbar to the left
let g:tagbar_left = 1
&quot; Place lines closer together
let g:tagbar_compact = 1</code></pre>
</div>
</div>
<div id="slime-to-send-code-to-a-target-terminal"
class="section level2">
<h2>Slime to send code to a target terminal</h2>
<p><a href="https://github.com/jpalardy/vim-slime">vim slime</a> &gt;
“Grab some text and send it to a target, most probably: GNU Screen, tmux
or Vim Terminal”</p>
<p>Tmux is not the default, to use it you will have to add this line to
your .vimrc:</p>
<pre><code>let g:slime_target = &quot;tmux&quot;</code></pre>
<p>Then add this to configure the sending of commands to a <a
href="https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop">Read
Eval Print Loop</a>: in the general use case of vim in a split tmux
window with a REPL in the other pane:</p>
<pre><code>let g:slime_default_config = {&quot;socket_name&quot;: &quot;default&quot;, &quot;target_pane&quot;: &quot;{last}&quot;}</code></pre>
<p>Send command to a tmux pane running bash, python or R with:</p>
<pre><code>Ctrl C</code></pre>
<div id="python-shell-mappings" class="section level3">
<h3>Python shell mappings</h3>
<p>I created the shortcut <code>;w</code>, <code>;l</code> and
<code>;p</code> to emulate NvimR’s shortcut which send the current word,
the current line or the current paragraph to the latest interactive
shell (ipython)</p>
<pre><code>autocmd FileType python nmap &lt;buffer&gt; &lt;LocalLeader&gt;w viw&lt;Plug&gt;SlimeRegionSend
autocmd FileType python nmap &lt;LocalLeader&gt;l &lt;Plug&gt;SlimeLineSend
autocmd FileType python nmap &lt;LocalLeader&gt;p &lt;Plug&gt;SlimeParagraphSend</code></pre>
</div>
<div id="auto-indent-indentationerror-unexpected-indent"
class="section level3">
<h3>Auto indent IndentationError: unexpected indent</h3>
<p>Excessive indentation issues can arrise when slime sends indented
lines to the ipython console. For example after a function definition,
such as <code>def function_name():</code> ipython places the cursor at
the indented place (4 spaces) and slime sends an additional 4 (or more
spaces) to indent the line further. This creates an “IndentationError:
unexpected indent”. This shouldn’t be done when slime is sending intput.
Ipython’s auto indentation behaviour can be turned off by sending the
following command to ipython:</p>
<pre><code>%autoindent off</code></pre>
</div>
</div>
<div id="syntax-highlight" class="section level2">
<h2>Syntax highlight</h2>
<p>Turn off syntax highlight</p>
<pre><code>syn off</code></pre>
<p>Start Vim with syntax highlight turned off</p>
<pre><code>vim -c &#39;syn off&#39;</code></pre>
<p>You can also specify a rule that vim should turn off syntax highlight
for large files <a
href="https://stackoverflow.com/questions/53729940/how-do-i-start-vim-with-syntax-highlighting-off">Stackoverflow
question</a>.</p>
<div id="concealing" class="section level3">
<h3>Concealing</h3>
<div id="markdown" class="section level4">
<h4>Markdown</h4>
<p>Use the shorthand version <code>:set cole=0</code> to turn off
concealing of markdown bold <code>**</code> and italic <code>*</code>
marks as well as the replacement of <code># Title</code> to
<code>§ Title</code>. More explanations in <a
href="https://vi.stackexchange.com/questions/7258/how-do-i-prevent-vim-from-hiding-symbols-in-markdown-and-json">How
to prevent vim from hiding symbols in Markdown and JSON</a></p>
<pre><code>:set cole=0</code></pre>
<p>Or set the file type to text</p>
<pre><code>:set ft=text</code></pre>
</div>
</div>
</div>
<div id="tests" class="section level2">
<h2>Tests</h2>
<p><a href="https://github.com/vim-test/vim-test">Vim Test</a> Works
with pytest and other testing suites for many languages. Test results
appear in the quick fix window.</p>
<p><a href="https://github.com/alfredodeza/pytest.vim">pytest vim</a>
Run pytest from within vim.</p>
<div id="pytest-vim-not-used" class="section level3">
<h3>Pytest vim (not used)</h3>
<p>I put the following options in the .vimrc</p>
<pre><code>&quot; Pytest
nmap &lt;silent&gt;&lt;Leader&gt;f &lt;Esc&gt;:Pytest file&lt;CR&gt;
nmap &lt;silent&gt;&lt;Leader&gt;c &lt;Esc&gt;:Pytest class&lt;CR&gt;
nmap &lt;silent&gt;&lt;Leader&gt;m &lt;Esc&gt;:Pytest method&lt;CR&gt;</code></pre>
</div>
<div id="vim-test" class="section level3">
<h3>Vim test</h3>
<p>Keyboard mapping defined in <code>.vimrc</code>:</p>
<pre><code>nmap &lt;silent&gt; &lt;leader&gt;T :TestFile&lt;CR&gt;
nmap &lt;silent&gt; &lt;leader&gt;a :TestSuite&lt;CR&gt;</code></pre>
<p>Define strategies to send the test output</p>
<pre><code>let test#strategy = &quot;make&quot;
&quot; let test#strategy = &quot;dispatch&quot;</code></pre>
<p>Use <code>:copen</code> to display a quickfix window.</p>
</div>
</div>
</div>
<div id="terminal-interaction" class="section level1">
<h1>Terminal interaction</h1>
<div id="bang-commands" class="section level2">
<h2>Bang commands</h2>
<p>Use a Bang! to run a command directly, for example to see how many
words are in the file, run:</p>
<pre><code>:! wc %</code></pre>
<p>To insert the word count directly in the file, run:</p>
<pre><code>!! wc %</code></pre>
<p>You can copy (<code>y $</code>) and paste a command in the vim
command line with <code>CTRL + R + "</code>.</p>
<p>Insert text from a specified file into the current buffer:</p>
<pre><code>:r textfile</code></pre>
<p>You can also read in the output of shell applications. For example,
if you wanted to include a list of files from a specific directory, you
could include them using a read command:</p>
<pre><code>:r ! ls -1 /home/user/directory</code></pre>
<p>Or simply using the double bang</p>
<pre><code> !! ls</code></pre>
</div>
<div id="shell" class="section level2">
<h2>Shell</h2>
<p><a
href="https://www.linux.com/learn/vim-tips-working-external-commands">Working
with external commands</a> explains how to start a shell:</p>
<pre><code>:shell</code></pre>
<p>Then exit the shell normally with <code>exit</code>.</p>
<p>See also terminal buffer below.</p>
</div>
<div id="terminal-buffer" class="section level2">
<h2>Terminal buffer</h2>
<p>You can start a terminal inside a vim split by entering the
command:</p>
<pre><code>:terminal</code></pre>
<p>To <a
href="https://vi.stackexchange.com/questions/20643/how-to-enter-normal-mode-while-in-terminal-buffer">enter
the normal mode in a terminal buffer</a>:</p>
<pre><code>CTRL+W+N</code></pre>
<p>Reddit <a
href="https://www.reddit.com/r/vim/comments/8zlsdo/does_anybody_use_terminal_instead_of_tmux_and_a/">does
anybody use terminal instead of tmux and a normal terminal?</a> Some
users prefer tmux panes and windows, others prefer vim terminal. I have
not used vim terminal buffers enough to know how to use them properly.
For example <a
href="https://vimawesome.com/plugin/vim-slime#vim-terminal">slime is
also working with vim’s terminal</a></p>
<p>To start a vertical terminal:</p>
<pre><code>:vert term</code></pre>
<p>Open a terminal in a new tab:</p>
<pre><code>:tab term</code></pre>
<p>Start a make action:</p>
<pre><code>:term make</code></pre>
<p>Start ipython3:</p>
<pre><code>:vert term ipython3</code></pre>
<p>Change the terminal window size to be 4 lines high (works for all
subsequent opening of a terminal <code>:term</code>)</p>
<pre><code>:set termwinsize=4x
:set tws=4x</code></pre>
<p>Change the size of the current terminal</p>
<pre><code>:res 10</code></pre>
</div>
</div>
<div id="tools" class="section level1">
<h1>Tools</h1>
<div id="count-words" class="section level2">
<h2>Count words</h2>
<p><a href="https://vim.fandom.com/wiki/Word_count">Word coung</a>: &gt;
To count the number of words in the current buffer, press g then Ctrl-g.
To &gt; count the number of words in a block, select the block (for
example, type V5j &gt; to select 6 lines) or vip to select the current
paragraph and again press</p>
<pre><code>g
Ctrl-g</code></pre>
<p>This will also display the character count.</p>
</div>
<div id="macros" class="section level2">
<h2>Macros</h2>
<p>Vim wiki <a href="https://vim.fandom.com/wiki/Macros">Macros</a></p>
<pre><code>qn  start recording to register n
...     your complex series of commands
q   stop recording
@n  execute your macro
@@  execute your macro again </code></pre>
<blockquote>
<p>“Suppose you have a macro which operates on the text in a single
line. You can run the macro on each line in a visual selection in a
single operation: Visually select some lines (for example, type vip to
select the current paragraph). Type :normal <span
class="citation">@q</span> to run the macro from register q on each
line.”</p>
</blockquote>
<p><a href="https://stackoverflow.com/a/10414748/2641825">Macro to add a
new line below each line</a></p>
<pre><code>qq     &quot; start recording to register q (you could use any register from a to z)
o      &quot; insert an empty line below cursor
&lt;Esc&gt;  &quot; switch to normal mode
jjj    &quot; move the cursor 3 lines downward
q      &quot; stop recording</code></pre>
<p>Then just move to the start line and type <a href="mailto:1000@q"
class="email">1000@q</a> to execute your macro 1000 times.</p>
</div>
<div id="spell-check" class="section level2">
<h2>Spell check</h2>
<p><a
href="https://superuser.com/questions/911412/how-to-configure-vim-spellcheck-to-use-two-languages">How
to configure vim spellcheck to use two languages</a> To use the
spellcheck for two languages, add this to your
<code>~/.vimrc</code>:</p>
<pre><code>set spell spelllang=en_gb,fr</code></pre>
<p>To use the spellcheck only temporary for an additional language
(italian in this case):</p>
<pre><code>set spell spelllang=it
set spell spelllang=de</code></pre>
<p>This might require installing addition Debian packages on the
system.</p>
<p>On the first use, vim may give a warning that some word lists are
missing. <a
href="https://www.monolune.com/how-to-make-vim-download-missing-word-lists/">How
to make vim download missing word lists</a> To solve this issue, turn
spell check off</p>
<pre><code>:set nospell </code></pre>
<p>Turn spell check on</p>
<pre><code>:set spell</code></pre>
<p>Then vim will offer to download the missing dictionaries.</p>
<p>Set spell check only in the local buffer:</p>
<pre><code>:setlocal spell spelllang=en_gb   </code></pre>
<p>Find alternative for highlighted word:</p>
<pre><code>z=</code></pre>
<p><a
href="https://superuser.com/questions/133208/how-to-make-vim-spellcheck-remember-a-new-word">How
to make vim spell check remember a word</a> Mark word as correct, this
creates a spell file under /home/user/.vim/spell:</p>
<pre><code>zg </code></pre>
<p>Mark word as incorrect</p>
<pre><code>zw</code></pre>
</div>
<div id="vim-diff" class="section level2">
<h2>Vim diff</h2>
<p>View differences between <code>file1</code> and <code>file2</code>
(vim documentation)</p>
<pre><code>vimdiff file1 file2</code></pre>
</div>
</div>
<div id="blogs-and-resources" class="section level1">
<h1>Blogs and resources</h1>
<p>This page is the continuation of <a
href="https://paulremote.blogspot.de/2014/07/vim-commands.html">my 2014
blog post on Vim commands</a>.</p>
<div id="other-editors" class="section level2">
<h2>Other editors</h2>
<ul>
<li><p><a
href="https://www.spacemacs.org/doc/VIMUSERS.html">Spacemacs</a></p>
<blockquote>
<p>“Spacemacs is an attempt to improve on both vim and Emacs using the
superior modal editing of vim and the nicer configuration language of
Emacs.”</p>
</blockquote></li>
<li><p><a
href="https://medium.com/@mkozlows/why-atom-cant-replace-vim-433852f4b4d1">Why
atom cant replace vim</a></p>
<blockquote>
<p>“This philosophy of minimalist commands that can be composed together
is the fundamental originating philosophy of Unix, and Vim exemplifies
it like no other editor.”</p>
</blockquote></li>
<li><p><a href="https://github.com/jupyter-vim/jupyter-vim">Jupyter
vim</a></p></li>
<li><p><a href="https://www.maketecheasier.com/useful-emacs-packages/">5
emacs packages for better productivity</a>: Org mode, magit, evil mode,
focus mode, darkroom</p></li>
<li><p>VS Code Vim</p>
<ul>
<li><p>VS Code NeoVim <a
href="https://github.com/vscode-neovim/vscode-neovim"
class="uri">https://github.com/vscode-neovim/vscode-neovim</a></p>
<blockquote>
<p>“VSCode’s native functionality is used for insert mode and editor
commands, making the best use of both editors.”</p>
</blockquote></li>
<li><p>VS Code Vim <a
href="https://marketplace.visualstudio.com/items?itemName=vscodevim.vim"
class="uri">https://marketplace.visualstudio.com/items?itemName=vscodevim.vim</a></p></li>
<li><p><a
href="https://www.reddit.com/r/vscode/comments/l7r1g8/in_your_opinion_is_it_better_to_use_vscode_vim_or/"
class="uri">https://www.reddit.com/r/vscode/comments/l7r1g8/in_your_opinion_is_it_better_to_use_vscode_vim_or/</a></p>
<blockquote>
<p>“I used Emacs, Vim and now VSCode for many years - I remain not
convinced that I’m faster at Vim for most edits - but I admit that using
Vim keybindings for some edits feels very cool, fast and smart. In the
end I can do most stuff on VSCode very fast, without modality, by
abusing multiple cursors and some extensions. Other than that, the Open
in Vim command (another extension) is a quick life saver when I need a
macro. And I’m betting on VSCode to continue improving faster than
Vim.”</p>
</blockquote></li>
<li><p><a
href="https://www.barbarianmeetscoding.com/blog/boost-your-coding-fu-with-vscode-and-vim"
class="uri">https://www.barbarianmeetscoding.com/blog/boost-your-coding-fu-with-vscode-and-vim</a></p>
<blockquote>
<p>“The true magic of Vim is composition. As you go building up this
vocabulary of operators and motions you’ll find that you can combine
them to your heart’s content. So that, once you know all the c, cl, caw,
ciw, ct. from the previous paragraph and you learn how dl works, you’ll
not only be able to use dl, you’ll know that you can also combine it
with all the motions you already have at your disposal and daw, diw, dt,
etc.”</p>
</blockquote></li>
</ul></li>
</ul>
<p>const salute = ‘I salute you oh Mighty Warrior’ You type ci’Hi!<ESC>
and it becomes: const salute = ‘Hi!’</p>
</div>
<div id="demonstrations-of-vim-use" class="section level2">
<h2>Demonstrations of vim use</h2>
<p>Reddit <a
href="https://www.reddit.com/r/vim/comments/chdl60/python_workflow_with_terminal_using_tmux/">Python
workflow with terminal using tmux</a> I tried slime.</p>
<p><a href="https://github.com/tridactyl/tridactyl">Browse the web in
vim mode</a></p>
<p><a
href="https://towardsdatascience.com/boosting-your-data-science-workflow-with-vim-tmux-14505c5e016e">Boosting
your data science workflow with vim+tmux</a></p>
</div>
<div id="learning-vim" class="section level2">
<h2>Learning vim</h2>
<ul>
<li><p><a
href="https://www.reddit.com/r/vim/comments/aak1lf/should_i_introduce_vim_to_my_kid/">Should
I introduce vim to my kid</a> &gt; “Learn to support, not to
shoehorn.”</p></li>
<li><p><a href="https://vim-adventures.com/">Vim adventures</a></p></li>
<li><p><a
href="https://www.freecodecamp.org/news/learn-linux-vim-basic-features-19134461ab85/">Learn
vim basic featurs</a></p></li>
<li><p><a
href="https://github.com/mhinz/vim-galore#the-vim-philosophy">Vim
Galore</a> introduction to vim maintained by a group of users</p></li>
</ul>
</div>
<div id="the-history-of-vim" class="section level2">
<h2>The history of vim</h2>
<ul>
<li><a
href="https://www.binpress.com/vim-creator-bram-moolenaar-interview/">Vim
creator Bram Moolenaar interview</a></li>
</ul>
<blockquote>
<p>“The project I encountered in Kibaale is completely different. The
foreigners who work there are volunteers, they have sponsors themselves
to make it possible to live and work there. All the donations for
children go to the project and are spent there. Also for staff and
vehicles, but that’s local staff that then spend their money in the
country, thus indirectly it helps others. And in the end seeing the
children grow up, finish their studies and find a job is wonderful.”</p>
</blockquote>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Vi">Vi</a></li>
</ul>
<blockquote>
<p>“The original code for vi was written by Bill Joy in 1976, as the
visual mode for a line editor called ex that Joy had written with Chuck
Haley.[3] Bill Joy’s ex 1.1 was released as part of the first Berkeley
Software Distribution (BSD) Unix release in March 1978. It was not until
version 2.0 of ex, released as part of Second BSD in May 1979 that the
editor was installed under the name”vi” (which took users straight into
ex’s visual mode),[4] and the name by which it is known today. […] On
the free software process</p>
</blockquote>
<ul>
<li>Vim is based on vi, itself based on the <a
href="https://en.wikipedia.org/wiki/Ex_(text_editor)">ex editor</a></li>
</ul>
<blockquote>
<p>“The core ex commands which relate to search and replace are
essential to vi. For instance, the ex command :%s/XXX/YYY/g replaces
every instance of XXX with YYY, and works in vi too. The % means every
line in the file. The ‘g’ stands for global and means replace every
instance on every line (if it was not specified, then only the first
instance on each line would be replaced).”</p>
</blockquote>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
